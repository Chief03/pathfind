(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},2048:e=>{"use strict";e.exports=require("fs")},6162:e=>{"use strict";e.exports=require("stream")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},2314:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>c}),r(5480),r(1521),r(5866);var n=r(3191),i=r(8716),a=r(7922),s=r.n(a),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5480)),"/Users/chief/Documents/Repos/CHI/pathfind/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1521)),"/Users/chief/Documents/Repos/CHI/pathfind/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/chief/Documents/Repos/CHI/pathfind/src/app/page.tsx"],d="/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8384:(e,t,r)=>{Promise.resolve().then(r.bind(r,9793))},9793:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>iv});var n,i,a,s,o,l,c,u,d,p,h=r(326),m=r(7577),f=r(5149),g=r(5361);function x(){let{user:e}=(0,f.Z)(e=>[e.user]),[t,r]=(0,m.useState)(!1),n=async()=>{try{await (0,g.w)()}catch(e){console.error("Error signing out:",e)}};return h.jsx("nav",{className:"bg-white shadow-md sticky top-0 z-50",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,h.jsxs)("div",{className:"flex justify-between items-center h-16",children:[h.jsx("div",{className:"flex items-center",children:h.jsx("a",{href:"/",className:"text-2xl font-bold text-[#FF5A5F]",children:"pathfind"})}),(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[h.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,h.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),h.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)("button",{onClick:()=>r(!t),className:"flex items-center space-x-2 p-2 hover:bg-gray-100 rounded-lg",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),h.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:e?e.username?.[0]?.toUpperCase():"?"})]}),t&&h.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2",children:e?(0,h.jsxs)(h.Fragment,{children:[h.jsx("div",{className:"px-4 py-2 text-sm text-gray-700 border-b",children:e.username||e.signInDetails?.loginId}),h.jsx("button",{onClick:()=>console.log("My Trips"),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"My Trips"}),h.jsx("button",{onClick:()=>console.log("Profile"),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"Profile"}),h.jsx("hr",{className:"my-2"}),h.jsx("button",{onClick:n,className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-red-600",children:"Sign Out"})]}):(0,h.jsxs)(h.Fragment,{children:[h.jsx("button",{onClick:()=>console.log("Sign In"),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"Sign In"}),h.jsx("button",{onClick:()=>console.log("Sign Up"),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"Create Account"})]})})]})]})]})})})}var b=r(9023),y=r(8367);function v(e){return"function"==typeof e}function N(e){return function(t){if(v(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}Symbol();var k=r(5826),S=function(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function E(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var w=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,n,i,a=this._parentage;if(a){if(this._parentage=null,Array.isArray(a))try{for(var s=(0,k.XA)(a),o=s.next();!o.done;o=s.next())o.value.remove(this)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else a.remove(this)}var l=this.initialTeardown;if(v(l))try{l()}catch(e){i=e instanceof S?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=(0,k.XA)(c),d=u.next();!d.done;d=u.next()){var p=d.value;try{j(p)}catch(e){i=null!=i?i:[],e instanceof S?i=(0,k.ev)((0,k.ev)([],(0,k.CR)(i)),(0,k.CR)(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}if(i)throw new S(i)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)j(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&E(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&E(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function T(e){return e instanceof w||e&&"closed"in e&&v(e.remove)&&v(e.add)&&v(e.unsubscribe)}function j(e){v(e)?e():e.unsubscribe()}w.EMPTY;var A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},C={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=C.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,k.ev)([e,t],(0,k.CR)(r))):setTimeout.apply(void 0,(0,k.ev)([e,t],(0,k.CR)(r)))},clearTimeout:function(e){var t=C.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function O(e){C.setTimeout(function(){var t=A.onUnhandledError;if(t)t(e);else throw e})}function D(){}var I=_("C",void 0,void 0);function _(e,t,r){return{kind:e,value:t,error:r}}var L=null,R=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,T(t)&&t.add(r)):r.destination=K,r}return(0,k.ZT)(t,e),t.create=function(e,t,r){return new $(e,t,r)},t.prototype.next=function(e){this.isStopped?B(_("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?B(_("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?B(I,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(w),M=Function.prototype.bind;function P(e,t){return M.call(e,t)}var F=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){U(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){U(e)}else U(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){U(e)}},e}(),$=function(e){function t(t,r,n){var i,a,s=e.call(this)||this;return v(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&A.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&P(t.next,a),error:t.error&&P(t.error,a),complete:t.complete&&P(t.complete,a)}):i=t,s.destination=new F(i),s}return(0,k.ZT)(t,e),t}(R);function U(e){A.useDeprecatedSynchronousErrorHandling?A.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=e):O(e)}function B(e,t){var r=A.onStoppedNotification;r&&C.setTimeout(function(){return r(e,t)})}var K={closed:!0,next:D,error:function(e){throw e},complete:D};function q(e,t,r,n,i){return new G(e,t,r,n,i)}var G=function(e){function t(t,r,n,i,a,s){var o=e.call(this,t)||this;return o.onFinalize=a,o.shouldUnsubscribe=s,o._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,o._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return(0,k.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(R);function V(e,t){return N(function(r,n){var i,a,s,o=0;r.subscribe(new G(n,function(r){n.next(e.call(t,r,o++))},void 0,void 0,void 0))})}function z(e){let t=new Set;for(let r of e.attributes||[]){if(r?.type==="auth"&&"object"==typeof r?.properties&&Array.isArray(r?.properties?.rules)&&(r?.properties?.rules).every(e=>!!e.allow))for(let e of r.properties.rules)"owner"===e.allow?t.add(e.ownerField||"owner"):"groups"===e.allow&&void 0!==e.groupsField&&t.add(e.groupsField)}return Array.from(t)}function W(e){return`${e[0].toUpperCase()}${e.slice(1)}`}function Y(e){let t,r;let n=new Promise((e,n)=>{t=e,r=n});return e(n).then(e=>{t(e)}).catch(e=>{r(e)}),n}let H=new WeakMap;function J(e,t){return H.set(t,e),e.finally(()=>{H.delete(t)})}let Q={HAS_ONE:"HAS_ONE",HAS_MANY:"HAS_MANY",BELONGS_TO:"BELONGS_TO"},X={ID:"ID",String:"String",AWSDate:"String",AWSTime:"String",AWSDateTime:"String",AWSTimestamp:"Int",AWSEmail:"String",AWSPhone:"String",AWSURL:"String",AWSIPAddress:"String",AWSJSON:"String",Boolean:"Boolean",Int:"Int",Float:"Float"},Z=e=>1===e.length?e[0]:e.reduce((e,t,r)=>0===r?t:e+W(t),""),ee=(e,t,r)=>{if(!r)return null;let n={};for(let[i,a]of Object.entries(r)){let r=t?e.models[t]?.fields[i]:void 0,s={fieldDef:r,value:a};(function(e){return"object"==typeof e.fieldDef?.type&&"model"in e.fieldDef.type&&"string"==typeof e.fieldDef.type.model&&e.fieldDef.isArray&&Array.isArray(e.value?.items)})(s)?n[i]=s.value.items.map(t=>ee(e,s.fieldDef.type.model,t)):function(e){return"object"==typeof e?.type&&"model"in e.type&&"string"==typeof e.type.model}(r)?n[i]=ee(e,r.type.model,a):n[i]=a}return n};function et(e,t,r,n,i,a,s=!1){let o=n.models[t],l=o.fields,c=Object.entries(l).filter(([e,t])=>t?.type?.model!==void 0).map(([e])=>e);return r.map(t=>{if(null==t)return t;let r={};for(let u of c){let c=l[u],d=(c?.type).model,p=n.models[d],h=p.primaryKeyInfo.primaryKeyFieldName,m=p.primaryKeyInfo.sortKeyFieldNames,f=c.association?.connectionType,g=[];c.association&&"associatedWith"in c.association&&(g=c.association.associatedWith);let x=[];switch(c.association&&"targetNames"in c.association&&x.push(...c.association.targetNames),f){case Q.BELONGS_TO:{let n=m.reduce((e,r)=>(t[r]&&(e[r]=t[r]),e),{});if(e.models[d]?.get===void 0)break;s?r[u]=(r,s)=>t[x[0]]?e.models[d].get(r,{[h]:t[x[0]],...n},{authMode:s?.authMode||i,authToken:s?.authToken||a}):{data:null}:r[u]=r=>t[x[0]]?e.models[d].get({[h]:t[x[0]],...n},{authMode:r?.authMode||i,authToken:r?.authToken||a}):{data:null};break}case Q.HAS_ONE:case Q.HAS_MANY:{let n=f===Q.HAS_ONE?e=>({data:e?.data.shift()||null,errors:e.errors,extensions:e.extensions}):e=>e,l=o.primaryKeyInfo.primaryKeyFieldName,c=o.primaryKeyInfo.sortKeyFieldNames,h=p.fields[g[0]];if(h.type.model){let o=[];h.association&&"targetNames"in h.association&&(o=h.association?.targetNames);let p=o.map((e,r)=>0===r?{[e]:{eq:t[l]}}:{[e]:{eq:t[c[r-1]]}});if(e.models[d]?.list===void 0)break;s?r[u]=(r,s)=>t[l]?Y(async t=>{let o=J(e.models[d].list(r,{filter:{and:p},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||a}),t);return n(await o)}):[]:r[u]=r=>t[l]?Y(async t=>{let s=J(e.models[d].list({filter:{and:p},limit:r?.limit,nextToken:r?.nextToken,authMode:r?.authMode||i,authToken:r?.authToken||a}),t);return n(await s)}):[];break}let m=g.map((e,r)=>0===r?{[e]:{eq:t[l]}}:{[e]:{eq:t[c[r-1]]}});if(e.models[d]?.list===void 0)break;s?r[u]=(r,s)=>t[l]?Y(async t=>{let o=J(e.models[d].list(r,{filter:{and:m},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||a}),t);return n(await o)}):[]:r[u]=r=>t[l]?Y(async t=>{let s=J(e.models[d].list({filter:{and:m},limit:r?.limit,nextToken:r?.nextToken,authMode:r?.authMode||i,authToken:r?.authToken||a}),t);return n(await s)}):[]}}}return{...t,...r}})}let er={CREATE:{operationPrefix:"create",usePlural:!1},GET:{operationPrefix:"get",usePlural:!1},UPDATE:{operationPrefix:"update",usePlural:!1},DELETE:{operationPrefix:"delete",usePlural:!1},LIST:{operationPrefix:"list",usePlural:!0},INDEX_QUERY:{operationPrefix:"",usePlural:!1},ONCREATE:{operationPrefix:"onCreate",usePlural:!1},ONUPDATE:{operationPrefix:"onUpdate",usePlural:!1},ONDELETE:{operationPrefix:"onDelete",usePlural:!1},OBSERVEQUERY:{operationPrefix:"observeQuery",usePlural:!1}},en=(e,t)=>{let{fields:r}=e;return Object.fromEntries(Object.values(r).map(({type:e,name:r})=>"string"==typeof e.enum?[r,ea]:"string"==typeof e.nonModel?[r,en(t.nonModels[e.nonModel],t)]:"string"==typeof e?[r,ea]:void 0).filter(e=>void 0!==e))},ei=(e,t)=>{let{fields:r}=e,n=Object.values(r).map(({type:e,name:r})=>"string"==typeof e.enum||"string"==typeof e?[r,ea]:"string"==typeof e.nonModel?[r,en(t.nonModels[e.nonModel],t)]:void 0).filter(e=>void 0!==e),i=z(e).map(e=>[e,ea]);return Object.fromEntries(n.concat(i))},ea="";function es(e){let t=[];return Object.entries(e).forEach(([e,r])=>{r===ea?t.push(e):"object"==typeof r&&null!==r&&(r?.items?t.push(e,"{","items","{",es(r.items),"}","}"):t.push(e,"{",es(r),"}"))}),t.join(" ")}function eo(e,t,r){let n=e.models[t];return es(function(e,t,r){let n=(t,r)=>{let[i,...a]=t.split("."),s=a[0],o=e.models[r]??e.nonModels[r],l=o?.fields,c=l?.[i]?.type?.model,u=e.models[c],d=l?.[i]?.type?.nonModel,p=e.nonModels[d],h=u?"model":p?"nonModel":"field";if("nonModel"===h){if(!s)throw Error(`${i} must declare a wildcard (*) or a field of custom type ${d}`);return"*"===s?{[i]:en(p,e)}:{[i]:n(a.join("."),d)}}if("model"===h){let t={};if(!s)throw Error(`${i} must declare a wildcard (*) or a field of model ${c}`);return t="*"===s?{[i]:ei(e.models[c],e)}:{[i]:n(a.join("."),c)},l[i]?.isArray&&(t={[i]:{items:t[i]}}),t}{let t=l?.[i],n=e.nonModels[r],a=n?.fields?.[i];if(n){if(!a)throw Error(`${i} is not a field of custom type ${r}`)}else{let e=z(o).includes(i);if(!t&&!e)throw Error(`${i} is not a field of model ${r}`)}return{[i]:ea}}};return r.reduce((e,r)=>(function e(t,r){let n=e=>e&&"object"==typeof e;for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(r,i)&&n(r[i])?e(t[i],r[i]):r[i]=t[i]);return r})(n(r,t),e),{})}(e,t,r??function(e){let{fields:t}=e,r=Object.values(t).map(({type:e,name:t})=>{if("string"==typeof e)return t;if("object"==typeof e){if("string"==typeof e?.enum)return t;if("string"==typeof e?.nonModel)return`${t}.*`}}).filter(Boolean),n=z(e);return Array.from(new Set(r.concat(n)))}(n)))}function el(e,t,r,n,i){let a,s,o,l,c;let{name:u,pluralName:d,fields:p,primaryKeyInfo:{isCustomPrimaryKey:h,primaryKeyFieldName:m,sortKeyFieldNames:f},attributes:g}=t,x=u.charAt(0).toUpperCase()+u.slice(1),b=d.charAt(0).toUpperCase()+d.slice(1),{operationPrefix:y,usePlural:v}=er[r],{selectionSet:N}=n||{};if(y)a=`${y}${v?b:x}`;else if(i){let{queryField:e,pk:t,sk:r=[]}=i;a=e;let n={};if(1===r.length){let[e]=r,t=X["string"==typeof p[e].type?p[e].type:"String"];n={[e]:`Model${t}KeyConditionInput`}}else if(r.length>1){let t=Z(r),i=g?.find(t=>t?.properties?.queryField===e)?.properties?.name;n={[t]:`Model${W(u)}${W(i)}CompositeKeyConditionInput`}}s={[t]:`${Object.prototype.hasOwnProperty.call(p[t].type,"enum")?p[t].type.enum:p[t].type}!`,...n}}else throw Error("Error generating GraphQL Document - invalid operation name");let k=eo(e,u,N),S={[m]:`${p[m].type}!`},E={},w=e=>{if(0===f.length)return{};if("get"===e)return f.reduce((t,r)=>{let n=p[r].type;return"get"===e&&(t[r]=`${n}!`),t},{});if(1!==f.length)return{[Z(f)]:`Model${W(u)}PrimaryCompositeKeyConditionInput`};{let[e]=f,t=X["string"==typeof p[e].type?p[e].type:"String"];return{[e]:`Model${t}KeyConditionInput`}}};switch(h&&(Object.assign(S,w("get")),Object.assign(E,{[m]:`${p[m].type}`,sortDirection:"ModelSortDirection"},w("list"))),r){case"CREATE":case"UPDATE":case"DELETE":c??(c={input:`${y.charAt(0).toLocaleUpperCase()+y.slice(1)}${x}Input!`}),o??(o="mutation");case"GET":c??(c=S),l??(l=k);case"LIST":c??(c={...E,filter:`Model${x}FilterInput`,limit:"Int",nextToken:"String"}),o??(o="query"),l??(l=`items { ${k} } nextToken __typename`);case"INDEX_QUERY":c??(c={...s,filter:`Model${x}FilterInput`,sortDirection:"ModelSortDirection",limit:"Int",nextToken:"String"}),o??(o="query"),l??(l=`items { ${k} } nextToken __typename`);case"ONCREATE":case"ONUPDATE":case"ONDELETE":c??(c={filter:`ModelSubscription${x}FilterInput`}),o??(o="subscription"),l??(l=k);break;default:throw Error("Internal error: Attempted to generate graphql document for observeQuery. Please report this error.")}return`${o}${c?`(${Object.entries(c).map(([e,t])=>`$${e}: ${t}`)})`:""} { ${a}${c?`(${Object.keys(c).map(e=>`${e}: $${e}`)})`:""} { ${l} } }`}function ec(e,t,r,n,i){let{fields:a,primaryKeyInfo:{isCustomPrimaryKey:s,primaryKeyFieldName:o,sortKeyFieldNames:l}}=e,c=l?.length&&Z(l),u={};switch(t){case"CREATE":u={input:r?eu(r,e,n):{}};break;case"UPDATE":u={input:r?Object.fromEntries(Object.entries(eu(r,e,n)).filter(([t])=>a[t]?!a[t].isReadOnly:!z(e).includes(t))):{}};break;case"GET":case"DELETE":r&&(u=s?[o,...l].reduce((e,t)=>(e[t]=r[t],e),{}):{[o]:r[o]}),"DELETE"===t&&(u={input:u});break;case"LIST":r?.filter&&(u.filter=r.filter),r?.sortDirection&&(u.sortDirection=r.sortDirection),r&&r[o]&&(u[o]=r[o]),c&&r&&r[c]&&(u[c]=r[c]),r?.nextToken&&(u.nextToken=r.nextToken),r?.limit&&(u.limit=r.limit);break;case"INDEX_QUERY":{let{pk:e,sk:t=[]}=i,n=t?.length&&Z(t);u[e]=r[e],n&&r&&r[n]&&(u[n]=r[n]),r?.filter&&(u.filter=r.filter),r?.sortDirection&&(u.sortDirection=r.sortDirection),r?.nextToken&&(u.nextToken=r.nextToken),r?.limit&&(u.limit=r.limit);break}case"ONCREATE":case"ONUPDATE":case"ONDELETE":r?.filter&&(u={filter:r.filter});break;case"OBSERVEQUERY":throw Error("Internal error: Attempted to build variables for observeQuery. Please report this error.");default:throw Error(`Unhandled operation case: ${t}`)}return u}function eu(e,t,r){let{fields:n}=t,i={};return Object.entries(e).forEach(([e,t])=>{let a=n[e]?.type,s=a?.model;if(s){let a=n[e]?.association,o=r.models[s].primaryKeyInfo;a?.connectionType===Q.HAS_ONE&&a.targetNames.forEach((e,r)=>{let n=a.associatedWith[r];i[e]=t[n]}),a?.connectionType===Q.BELONGS_TO&&a.targetNames.forEach((e,r)=>{if(0===r){let r=o.primaryKeyFieldName;i[e]=t[r]}else{let n=o.sortKeyFieldNames[r-1];i[e]=t[n]}})}else i[e]=t}),i}function ed(e,t,r={}){let n=t(e);return{authMode:r.authMode||n.authMode,authToken:r.authToken||n.authToken}}function ep(e,t,r){let n=t(e).headers||{};return r&&(n=r),n}function eh(e){if(e?.errors)return{...e,data:[]};throw e}function em(e){if(e.errors)return{...e,data:null};throw e}let ef=Symbol("INTERNAL_USER_AGENT_OVERRIDE");!function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnStreamEvent="7",e.Generation="8",e.UpdateConversation="9"}(n||(n={}));let eg=e=>({category:"ai",action:e});function ex(e){return e?{[ef]:e}:void 0}let eb=e=>"symbol"==typeof e?.token?.value;function ey(e,t,r,n,i,a,s){let o=void 0!==n.arguments;return(...l)=>{var c,u;let d,p;let h=l[l.length-1];if(i){if(eb(l[0]))d=l[0];else throw Error(`Invalid first argument passed to ${n.name}. Expected contextSpec`)}return(o&&(p=i?l[1]:l[0]),"subscription"===r)?function(e,t,r,n,i,a,s){let{name:o}=r,l=ed(e,n,a),c=ep(e,n,a?.headers),u=eN(r),d=ek(r),p=eS(t,r),h=ev(r.type,"model")?r.type.model:void 0,m=`
    ${"subscription".toLocaleLowerCase()}${u} {
      ${o}${d} ${p}
    }
  `,f=eE(r,i),g=ex(s);return e.graphql({...l,query:m,variables:f,...g},c).pipe(V(r=>{let[n]=Object.keys(r.data),i=r.data[n],[a]=h?et(e,h,[i],t,l.authMode,l.authToken):[i];return a}))}(e,t,n,a,p,h,s):(c=p,u=d,Y(async i=>{let{name:o}=n,l=ed(e,a,h),d=ep(e,a,h?.headers),p=eN(n),m=ek(n),f=eS(t,n),g=ev(n.type,"model")?n.type.model:void 0,x=`
    ${r.toLocaleLowerCase()}${p} {
      ${o}${m} ${f}
    }
  `,b=eE(n,c),y=ex(s);try{let r=u?e.graphql(u,{...l,query:x,variables:b},d):e.graphql({...l,query:x,variables:b,...y},d),n=J(r,i),{data:a,extensions:s}=await n;if(!a)return{data:null,extensions:s};{let[r]=Object.keys(a),n=Array.isArray(a[r]),i=n?a[r].filter(e=>e):a[r],o=g?et(e,g,n?i:[i],t,l.authMode,l.authToken,!!u):i;return{data:!n&&Array.isArray(o)?o.shift():o,extensions:s}}}catch(i){let{data:r,errors:n}=i;if(!r||0===Object.keys(r).length||!n)return em(i);{let[a]=Object.keys(r),s=Array.isArray(r[a]),o=s?r[a].filter(e=>e):r[a];if(!o)return em(i);{let r=g?et(e,g,s?o:[o],t,l.authMode,l.authToken,!!u):o;return{data:!s&&Array.isArray(r)?r.shift():r,errors:n}}}}}))}}function ev(e,t){return"string"==typeof e[t]}function eN(e){if(void 0===e.arguments)return"";let t=Object.entries(e.arguments).map(([e,t])=>{let r=function({type:e,isRequired:t}){let r=t?"!":"";return e instanceof Object&&"enum"in e?`${e.enum}${r}`:e instanceof Object&&"input"in e?`${e.input}${r}`:`${e}${r}`}(t),n=t.isArray?`[${r}]${t.isArrayNullable?"":"!"}`:r;return`$${e}: ${n}`}).join(", ");return t.length>0?`(${t})`:""}function ek(e){if(void 0===e.arguments)return"";let t=Object.keys(e.arguments).map(e=>`${e}: $${e}`).join(", ");return t.length>0?`(${t})`:""}function eS(e,t){if(ev(t,"type")||ev(t.type,"enum"))return"";if(ev(t.type,"nonModel")){let r=e.nonModels[t.type.nonModel];return`{${es(en(r,e))}}`}return ev(t.type,"model")?`{${eo(e,t.type.model)}}`:""}function eE(e,t={}){let r={};if(void 0===e.arguments)return r;for(let n of Object.values(e.arguments))if(void 0!==t[n.name])r[n.name]=t[n.name];else if(n.isRequired)throw Error(`${e.name} requires arguments '${n.name}'`);return r}let ew={queries:"query",mutations:"mutation",subscriptions:"subscription"};function eT(e,t,r,n){if(!t)return{};let i=t.modelIntrospection;if(!i)return{};let a=i[r];if(!a)return{};let s={},o=null===n(e).amplify;for(let t of Object.values(a))s[t.name]=ey(e,i,ew[r],t,o,n);return s}function ej(e,t,r,n,i,a=!1,s){return a?(a,o,l)=>eA(e,t,r,o,l,n,i,a,s):(a,o)=>eA(e,t,r,a,o,n,i,void 0,s)}function eA(e,t,r,n,i,a,s,o,l){return Y(async c=>{let{name:u}=r,d=el(t,r,a,i),p=ec(r,a,n,t),h=ed(e,s,i),m=ep(e,s,i?.headers),f=ex(l);try{let r=o?e.graphql(o,{...h,query:d,variables:p},m):e.graphql({...h,query:d,variables:p,...f},m),n=J(r,c),{data:a,extensions:s}=await n;if(!a)return{data:null,extensions:s};{let[r]=Object.keys(a),n=ee(t,u,a[r]);if(null===n)return{data:null,extensions:s};if(i?.selectionSet)return{data:n,extensions:s};{let[r]=et(e,u,[n],t,h.authMode,h.authToken,!!o);return{data:r,extensions:s}}}}catch(a){let{data:r,errors:n}=a;if(!r||0===Object.keys(r).length||!n)return em(a);{let[s]=Object.keys(r),l=ee(t,u,r[s]);if(!l)return em(a);if(i?.selectionSet)return{data:l,errors:n};{let[r]=et(e,u,[l],t,h.authMode,h.authToken,!!o);return{data:r,errors:n}}}}})}function eC(e,t,r,n,i=!1,a){return i?(i,s)=>eO(e,t,r,n,s,i,a):i=>eO(e,t,r,n,i,void 0,a)}function eO(e,t,r,n,i,a,s){return Y(async o=>{let{name:l}=r,c=el(t,r,"LIST",i),u=ec(r,"LIST",i,t),d=ed(e,n,i),p=ep(e,n,i?.headers),h=ex(s);try{let r=a?e.graphql(a,{...d,query:c,variables:u},p):e.graphql({...d,query:c,variables:u,...h},p),n=J(r,o),{data:s,extensions:m}=await n;if(void 0!==s){let[r]=Object.keys(s);if(s[r].items){let n=s[r].items.map(e=>ee(t,l,e));if(i?.selectionSet)return{data:n,nextToken:s[r].nextToken,extensions:m};return{data:et(e,l,n,t,d.authMode,d.authToken,!!a),nextToken:s[r].nextToken,extensions:m}}return{data:s[r],nextToken:s[r].nextToken,extensions:m}}}catch(s){let{data:r,errors:n}=s;if(null==r||0===Object.keys(r).length||!n)return eh(s);{let[o]=Object.keys(r);if(!r[o]?.items)return eh(s);{let s=r[o].items.map(e=>ee(t,l,e));if(s){if(i?.selectionSet)return{data:s,nextToken:r[o]?.nextToken,errors:n};return{data:et(e,l,s,t,d.authMode,d.authToken,!!a),nextToken:r[o]?.nextToken,errors:n}}return{data:r[o],nextToken:r[o]?.nextToken,errors:n}}}}})}let eD=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e);var eI=r(8893);let e_=(e,t=0,r=e.byteLength-t)=>{if(!eD(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return eI.Buffer.from(e,t,r)},eL=(e,t)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?eI.Buffer.from(e,t):eI.Buffer.from(e)},eR=/^[A-Za-z0-9+/]*={0,2}$/,eM=e=>{if(3*e.length%4!=0)throw TypeError("Incorrect padding on base64 string.");if(!eR.exec(e))throw TypeError("Invalid base64 string.");let t=eL(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},eP=e=>{let t=eL(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},eF=e=>{let t;if("object"!=typeof(t="string"==typeof e?eP(e):e)||"number"!=typeof t.byteOffset||"number"!=typeof t.byteLength)throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return e_(t.buffer,t.byteOffset,t.byteLength).toString("base64")},e$=e=>e.map(e=>e.image?eU(e):e.document?eB(e):e.toolUse?eq(e):e.toolResult?eG(e):eV(e)),eU=({image:e})=>({image:{...e,source:{...e.source,bytes:eM(e.source.bytes)}}}),eB=({document:e})=>({document:{...e,source:{...e.source,bytes:eM(e.source.bytes)}}}),eK=({json:e})=>({json:JSON.parse(e)}),eq=({toolUse:e})=>({toolUse:{...e,input:JSON.parse(e.input)}}),eG=({toolResult:e})=>({toolResult:{toolUseId:e.toolUseId,content:e.content.map(e=>e.image?eU(e):e.json?eK(e):eV(e))}}),eV=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),ez=({content:e,createdAt:t,id:r,conversationId:n,role:i})=>({content:e$(e??[]),conversationId:n,createdAt:t,id:r,role:i}),eW=(e,t,r,i,a)=>async s=>{let o=eC(e,t,i,a,!1,eg(n.ListMessages)),{data:l,nextToken:c,errors:u}=await o({...s,filter:{conversationId:{eq:r}}});return{data:l.map(e=>ez(e)),nextToken:c,errors:u}},eY=({id:e,conversationId:t,associatedUserMessageId:r,contentBlockIndex:n,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:a,contentBlockText:s,contentBlockToolUse:o,stopReason:l,errors:c})=>c?{error:{id:e,conversationId:t,associatedUserMessageId:r,errors:c}}:{next:eJ({id:e,conversationId:t,associatedUserMessageId:r,contentBlockIndex:n,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:a,text:s,toolUse:eH(o),stopReason:l})},eH=e=>{if(e)return{...e,input:JSON.parse(e.input)}},eJ=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),eQ=(e,t,r,i,a)=>s=>{let{conversations:o}=t;return o?ey(e,t,"subscription",o[i].message.subscribe,!1,a,eg(n.OnStreamEvent))({conversationId:r}).subscribe(e=>{let{next:t,error:r}=eY(e);r&&s.error(r),t&&s.next(t)}):{}},eX=e=>JSON.stringify(e),eZ=e=>e.map(e=>e.image?e1(e):e.document?e2(e):e.toolResult?e3(e):e),e0=({tools:e})=>({tools:Object.entries(e).map(([e,t])=>({toolSpec:{name:e,description:t.description,inputSchema:{json:JSON.stringify(t.inputSchema.json)}}}))}),e1=({image:e})=>({image:{...e,source:{...e.source,bytes:eF(e.source.bytes)}}}),e2=({document:e})=>({document:{...e,source:{...e.source,bytes:eF(e.source.bytes)}}}),e4=({json:e})=>({json:JSON.stringify(e)}),e3=({toolResult:e})=>({toolResult:{...e,content:e.content.map(e=>e.image?e1(e):e.json?e4(e):e)}}),e5=(e,t,r,i,a)=>async s=>{let{conversations:o}=t;if(!o)return{};let{content:l,aiContext:c,toolConfiguration:u}="string"==typeof s?{content:[{text:s}]}:s,d=ey(e,t,"mutation",o[i].message.send,!1,a,eg(n.SendMessage)),{data:p,errors:h}=await d({conversationId:r,content:eZ(l),...c&&{aiContext:eX(c)},...u&&{toolConfiguration:e0(u)}});return{data:p?ez(p):p,errors:h}},e6=(e,t,r,n,i,a,s,o,l,c)=>{if(!r)throw Error(`An error occurred converting a ${a} conversation: Missing ID`);return{id:r,createdAt:n,updatedAt:i,metadata:l,name:c,onStreamEvent:eQ(e,t,r,a,o),sendMessage:e5(e,t,r,a,o),listMessages:eW(e,t,r,s,o)}},e8=(e,t,r,i,a,s)=>async o=>{let{name:l,metadata:c}=o??{},u=JSON.stringify(c),d=ej(e,t,i,"CREATE",s,!1,eg(n.CreateConversation)),{data:p,errors:h}=await d({name:l,metadata:u});return{data:e6(e,t,p?.id,p?.createdAt,p?.updatedAt,r,a,s,p?.metadata,p?.name),errors:h}},e7=(e,t,r,i,a,s)=>async({id:o})=>{let l=ej(e,t,i,"GET",s,!1,eg(n.GetConversation)),{data:c,errors:u}=await l({id:o});return{data:c?e6(e,t,c.id,c.createdAt,c.updatedAt,r,a,s,c?.metadata,c?.name):c,errors:u}},e9=(e,t,r,i,a,s)=>async o=>{let l=eC(e,t,i,s,!1,eg(n.ListConversations)),{data:c,nextToken:u,errors:d}=await l(o);return{data:c.map(n=>e6(e,t,n.id,n.createdAt,n.updatedAt,r,a,s,n?.metadata,n?.name)),nextToken:u,errors:d}},te=(e,t,r,i,a,s)=>async({id:o})=>{let l=ej(e,t,i,"DELETE",s,!1,eg(n.DeleteConversation)),{data:c,errors:u}=await l({id:o});return{data:c?e6(e,t,c?.id,c?.createdAt,c?.updatedAt,r,a,s,c?.metadata,c?.name):c,errors:u}},tt=(e,t,r,i,a,s)=>async({id:o,metadata:l,name:c})=>{let u=JSON.stringify(l),d=ej(e,t,i,"UPDATE",s,!1,eg(n.UpdateConversation)),{data:p,errors:h}=await d({id:o,metadata:u,name:c});return{data:p?e6(e,t,p?.id,p?.createdAt,p?.updatedAt,r,a,s,p?.metadata,p?.name):p,errors:h}},tr=e=>{let t=e.modelIntrospection;if(!t)return{};let r={};for(let[e,n]of Object.entries(t.enums))r[n.name]={values:()=>n.values};return r};function tn(e,t,r,n,i,a,s){return Y(async o=>{let{name:l}=r,c=el(t,r,"INDEX_QUERY",a,n),u=ec(r,"INDEX_QUERY",a,t,n),d=ed(e,i,a),p=r=>et(e,l,r,t,d.authMode,d.authToken,!!s);try{let r=ep(e,i,a?.headers),n=[{...d,query:c,variables:u},r];void 0!==s&&n.unshift(s);let h=e.graphql(...n),m=J(h,o),f=await m;if(void 0!==f.data)return function(e,t,r,n,i){let{data:a,extensions:s}=r,[o]=Object.keys(a);if(a[o].items){let r=a[o].items.map(r=>ee(e,t,r));return{data:n?r:i(r),nextToken:a[o].nextToken,extensions:s}}return{data:a[o],nextToken:a[o].nextToken,extensions:s}}(t,l,f,a?.selectionSet,p)}catch(n){let{data:e,errors:r}=n;if(null==e||0===Object.keys(e).length||!r)return eh(n);{let[r]=Object.keys(e);if(e[r]?.items){let n=e[r]?.items.map(e=>ee(t,l,e));if(n)return{data:a?.selectionSet?n:p(n),nextToken:e[r]?.nextToken}}return{data:e[r],nextToken:e[r]?.nextToken}}}})}var ti="function"==typeof Symbol&&Symbol.observable||"@@observable",ta=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,i=this,a=(n=e)&&n instanceof R||n&&v(n.next)&&v(n.error)&&v(n.complete)&&T(n)?e:new $(e,t,r);return function(e){if(A.useDeprecatedSynchronousErrorHandling){var t=!L;if(t&&(L={errorThrown:!1,error:null}),e(),t){var r=L,n=r.errorThrown,i=r.error;if(L=null,n)throw i}}else e()}(function(){var e=i.operator,t=i.source;a.add(e?e.call(a,t):t?i._subscribe(a):i._trySubscribe(a))}),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=ts(t))(function(t,n){var i=new $({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[ti]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?function(e){return e}:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ts(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function ts(e){var t;return null!==(t=null!=e?e:A.Promise)&&void 0!==t?t:Promise}let to=e=>"key"===e.type&&e.properties?.name&&e.properties?.queryField&&e.properties?.fields.length>0,tl=e=>e.attributes?.filter(to).map(e=>{let t=e.properties.queryField,[r,...n]=e.properties.fields;return{queryField:t,pk:r,sk:n}})||[],tc=(e,t)=>{let r=e.models[t].attributes?.find(e=>"model"===e.type),n={queries:["list","get","observeQuery"],mutations:["create","update","delete"],subscriptions:["onCreate","onUpdate","onDelete"]},i=[];if(!r)return er;if(r.properties)for(let[e,t]of Object.entries(r.properties))e in n&&(null===t?i.push(...n[e]):t instanceof Object&&i.push(...Object.keys(t)));i.includes("list")&&i.push("observeQuery");let a=i.map(e=>e.toUpperCase());return Object.fromEntries(Object.entries(er).filter(([e])=>!a.includes(e)))};function tu(e,t,r){return function(e){let t=e.cancel.bind(e);e.cancel=function(e,r){let n=new Set,i=e;for(;i&&H.has(i);){if(n.has(i))throw Error("A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!");n.add(i),i=H.get(i)}return t(i,r)}}(e),e.models=function(e,t,r){let n={},i=t.modelIntrospection;if(!i)return{};let a=["ONCREATE","ONUPDATE","ONDELETE"];for(let t of Object.values(i.models)){let{name:s}=t;for(let o of(n[s]={},Object.entries(tc(i,s)).forEach(([o,{operationPrefix:l}])=>{"LIST"===o?n[s][l]=eC(e,i,t,r):a.includes(o)?n[s][l]=function(e,t,r,n,i){let{name:a}=r;return s=>{let o=el(t,r,n,s),l=ec(r,n,s,t),c=ed(e,i,s),u=ep(e,i,s?.headers);return e.graphql({...c,query:o,variables:l},u).pipe(V(r=>{let[n]=Object.keys(r.data),i=ee(t,a,r.data[n]);if(null===i)return null;if(s?.selectionSet)return i;{let[r]=et(e,a,[i],t,c.authMode,c.authToken);return r}}))}}(e,i,t,o,r):"OBSERVEQUERY"===o?n[s][l]=function(e,t){let{name:r}=t;return n=>new ta(i=>{let a=[],s=[],o=(...e)=>s.push(...e),l=e[r].onCreate(n).subscribe({next(e){o({item:e,type:"create"})},error(e){i.error({type:"onCreate",error:e})}}),c=e[r].onUpdate(n).subscribe({next(e){o({item:e,type:"update"})},error(e){i.error({type:"onUpdate",error:e})}}),u=e[r].onDelete(n).subscribe({next(e){o({item:e,type:"delete"})},error(e){i.error({type:"onDelete",error:e})}});function d(e){for(let t of e){let e=function(e,t,r){let n=Object.fromEntries(r.map(t=>[t,e[t]]));for(let e=0;e<t.length;e++)if(Object.keys(n).every(r=>n[r]===t[e][r]))return e;return -1}(t.item,a,p);switch(t.type){case"create":e<0&&a.push(t.item);break;case"update":e>=0&&(a[e]=t.item);break;case"delete":e>=0&&a.splice(e,1);break;default:console.error("Unrecognized message in observeQuery.",t)}}i.next({items:a,isSynced:!0})}let p=function(e){let{primaryKeyFieldName:t,sortKeyFieldNames:r}=e.primaryKeyInfo;return[t,...r]}(t);return(async()=>{let t=!0,l=null;for(;!i.closed&&(t||l);){t=!1;let{data:o,errors:c,nextToken:u}=await e[r].list({...n,nextToken:l});l=u,a.push(...o);let d=0===s.length&&null==l;if(i.next({items:a,isSynced:d}),Array.isArray(c))for(let e of c)i.error(e)}s.length>0&&d(s),o=(...e)=>(d(e),a.length)})(),()=>{l.unsubscribe(),c.unsubscribe(),u.unsubscribe()}})}(n,t):n[s][l]=ej(e,i,t,o,r)}),tl(t)))n[s][o.queryField]=function(e,t,r,n,i,a=!1){return a?(a,s,o)=>tn(e,t,r,n,i,{...s,...o},a):(a,s)=>tn(e,t,r,n,i,{...a,...s})}(e,i,t,o,r)}return n}(e,t,r),e.enums=tr(t),e.queries=eT(e,t,"queries",r),e.mutations=eT(e,t,"mutations",r),e.subscriptions=eT(e,t,"subscriptions",r),e.conversations=function(e,t,r){let n=t?.modelIntrospection;if(!n?.conversations)return{};let i={};for(let{name:t,conversation:a,message:s,models:o,nonModels:l,enums:c}of Object.values(n.conversations)){let u=o[a.modelName],d=o[s.modelName];if(!u||!d)return{};let p={...n,models:{...n.models,...o},nonModels:{...n.nonModels,...l},enums:{...n.enums,...c}};i[t]={update:tt(e,p,t,u,d,r),create:e8(e,p,t,u,d,r),get:e7(e,p,t,u,d,r),delete:te(e,p,t,u,d,r),list:e9(e,p,t,u,d,r)}}return i}(e,t,r),e.generations=function(e,t,r){let i=t?.modelIntrospection;if(!i?.generations)return{};let a={};for(let t of Object.values(i.generations))a[t.name]=ey(e,i,"query",t,!1,r,eg(n.Generation));return a}(e,t,r),e}!function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified"}(i||(i={}));let td=Symbol("amplify"),tp=Symbol("authMode"),th=Symbol("authToken"),tm=Symbol("apiKey"),tf=Symbol("headers"),tg=Symbol("endpoint");function tx(e){return{amplify:e[td],apiKey:e[tm],authMode:e[tp],authToken:e[th],endpoint:e[tg],headers:e[tf]}}var tb=r(9751);function ty(e){return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var tv="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function tN(e,t){for(var r,n=/\r\n|[\n\r]/g,i=1,a=t+1;(r=n.exec(e.body))&&r.index<t;)i+=1,a=t+1-(r.index+r[0].length);return{line:i,column:a}}function tk(e,t){var r=e.locationOffset.column-1,n=tE(r)+e.body,i=t.line-1,a=e.locationOffset.line-1,s=t.line+a,o=1===t.line?r:0,l=t.column+o,c="".concat(e.name,":").concat(s,":").concat(l,"\n"),u=n.split(/\r\n|[\n\r]/g),d=u[i];if(d.length>120){for(var p=Math.floor(l/80),h=l%80,m=[],f=0;f<d.length;f+=80)m.push(d.slice(f,f+80));return c+tS([["".concat(s),m[0]]].concat(m.slice(1,p+1).map(function(e){return["",e]}),[[" ",tE(h-1)+"^"],["",m[p+1]]]))}return c+tS([["".concat(s-1),u[i-1]],["".concat(s),d],["",tE(l-1)+"^"],["".concat(s+1),u[i+1]]])}function tS(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),r=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t=e[0],n=e[1];return tE(r-t.length)+t+(n?" | "+n:" |")}).join("\n")}function tE(e){return Array(e+1).join(" ")}function tw(e){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tj(e,t){return t&&("object"===tw(t)||"function"==typeof t)?t:tA(e)}function tA(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tC(e){var t="function"==typeof Map?new Map:void 0;return(tC=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return tO(e,arguments,t_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),tI(r,e)})(e)}function tO(e,t,r){return(tO=tD()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&tI(i,r.prototype),i}).apply(null,arguments)}function tD(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function tI(e,t){return(tI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t_(e){return(t_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tI(e,t)}(i,e);var t,r,n=(t=tD(),function(){var e,r=t_(i);return e=t?Reflect.construct(r,arguments,t_(this).constructor):r.apply(this,arguments),tj(this,e)});function i(e,t,r,a,s,o,l){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),(g=n.call(this,e)).name="GraphQLError",g.originalError=null!=o?o:void 0,g.nodes=tR(Array.isArray(t)?t:t?[t]:void 0);for(var c,u=[],d=0,p=null!==(x=g.nodes)&&void 0!==x?x:[];d<p.length;d++){var h,m,f,g,x,b=p[d].loc;null!=b&&u.push(b)}u=tR(u),g.source=null!=r?r:null===(h=u)||void 0===h?void 0:h[0].source,g.positions=null!=a?a:null===(m=u)||void 0===m?void 0:m.map(function(e){return e.start}),g.locations=a&&r?a.map(function(e){return tN(r,e)}):null===(f=u)||void 0===f?void 0:f.map(function(e){return tN(e.source,e.start)}),g.path=null!=s?s:void 0;var y=null==o?void 0:o.extensions;return null==l&&"object"==ty(c=y)&&null!==c?g.extensions=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tT(Object(r),!0).forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},y):g.extensions=null!=l?l:{},(Object.defineProperties(tA(g),{message:{enumerable:!0},locations:{enumerable:null!=g.locations},path:{enumerable:null!=g.path},extensions:{enumerable:null!=g.extensions&&Object.keys(g.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=o&&o.stack)?(Object.defineProperty(tA(g),"stack",{value:o.stack,writable:!0,configurable:!0}),tj(g)):(Error.captureStackTrace?Error.captureStackTrace(tA(g),i):Object.defineProperty(tA(g),"stack",{value:Error().stack,writable:!0,configurable:!0}),g)}return r=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var r=0,n=e.nodes;r<n.length;r++){var i,a=n[r];a.loc&&(t+="\n\n"+tk((i=a.loc).source,tN(i.source,i.start)))}else if(e.source&&e.locations)for(var s=0,o=e.locations;s<o.length;s++){var l=o[s];t+="\n\n"+tk(e.source,l)}return t}(this)}},{key:tv,get:function(){return"Object"}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(i.prototype,r),i}(tC(Error));function tR(e){return void 0===e||0===e.length?void 0:e}function tM(e,t,r){return new tL("Syntax Error: ".concat(r),void 0,e,[t])}var tP=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),tF="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function t$(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){throw Error("Unexpected invariant triggered.")}(0),e.prototype.inspect=t,tF&&(e.prototype[tF]=t)}var tU=function(){function e(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();t$(tU);var tB=function(){function e(e,t,r,n,i,a,s){this.kind=e,this.start=t,this.end=r,this.line=n,this.column=i,this.value=s,this.prev=a,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function tK(e){return null!=e&&"string"==typeof e.kind}t$(tB);var tq=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function tG(e){return(tG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tV(e,t){switch(tG(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":if(null===e)return"null";return function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var r,n,i=[].concat(t,[e]),a="function"==typeof(r=e[String(tF)])?r:"function"==typeof e.inspect?e.inspect:void 0;if(void 0!==a){var s=a.call(e);if(s!==e)return"string"==typeof s?s:tV(s,i)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var r=Math.min(10,e.length),n=e.length-r,i=[],a=0;a<r;++a)i.push(tV(e[a],t));return 1===n?i.push("... 1 more item"):n>1&&i.push("... ".concat(n," more items")),"["+i.join(", ")+"]"}(e,i);return 0===(n=Object.keys(e)).length?"{}":i.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var r=e.constructor.name;if("string"==typeof r&&""!==r)return r}return t}(e)+"]":"{ "+n.map(function(t){var r=tV(e[t],i);return t+": "+r}).join(", ")+" }"}(e,t);default:return String(e)}}function tz(e,t){if(!e)throw Error(t)}var tW=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||tz(0,"Body must be a string. Received: ".concat(tV(e,[]),".")),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||tz(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||tz(0,"column in locationOffset is 1-indexed and must be positive.")}return function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,[{key:tv,get:function(){return"Source"}}]),e}(),tY=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function tH(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"	"!==e[t])return!1;return!0}var tJ=function(){function e(e){var t=new tB(tq.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e,t=this.token;if(t.kind!==tq.EOF)do t=null!==(e=t.next)&&void 0!==e?e:t.next=function(e,t){for(var r=e.source,n=r.body,i=n.length,a=t.end;a<i;){var s=n.charCodeAt(a),o=e.line,l=1+a-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++e.line,e.lineStart=a;continue;case 13:10===n.charCodeAt(a+1)?a+=2:++a,++e.line,e.lineStart=a;continue;case 33:return new tB(tq.BANG,a,a+1,o,l,t);case 35:return function(e,t,r,n,i){var a,s=e.body,o=t;do a=s.charCodeAt(++o);while(!isNaN(a)&&(a>31||9===a));return new tB(tq.COMMENT,t,o,r,n,i,s.slice(t+1,o))}(r,a,o,l,t);case 36:return new tB(tq.DOLLAR,a,a+1,o,l,t);case 38:return new tB(tq.AMP,a,a+1,o,l,t);case 40:return new tB(tq.PAREN_L,a,a+1,o,l,t);case 41:return new tB(tq.PAREN_R,a,a+1,o,l,t);case 46:if(46===n.charCodeAt(a+1)&&46===n.charCodeAt(a+2))return new tB(tq.SPREAD,a,a+3,o,l,t);break;case 58:return new tB(tq.COLON,a,a+1,o,l,t);case 61:return new tB(tq.EQUALS,a,a+1,o,l,t);case 64:return new tB(tq.AT,a,a+1,o,l,t);case 91:return new tB(tq.BRACKET_L,a,a+1,o,l,t);case 93:return new tB(tq.BRACKET_R,a,a+1,o,l,t);case 123:return new tB(tq.BRACE_L,a,a+1,o,l,t);case 124:return new tB(tq.PIPE,a,a+1,o,l,t);case 125:return new tB(tq.BRACE_R,a,a+1,o,l,t);case 34:if(34===n.charCodeAt(a+1)&&34===n.charCodeAt(a+2))return function(e,t,r,n,i,a){for(var s=e.body,o=t+3,l=o,c=0,u="";o<s.length&&!isNaN(c=s.charCodeAt(o));){if(34===c&&34===s.charCodeAt(o+1)&&34===s.charCodeAt(o+2))return u+=s.slice(l,o),new tB(tq.BLOCK_STRING,t,o+3,r,n,i,function(e){var t=e.split(/\r\n|[\n\r]/g),r=function(e){for(var t,r=!0,n=!0,i=0,a=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:r=!1,n=!0,i=0;break;case 9:case 32:++i;break;default:n&&!r&&(null===a||i<a)&&(a=i),n=!1}return null!==(t=a)&&void 0!==t?t:0}(e);if(0!==r)for(var n=1;n<t.length;n++)t[n]=t[n].slice(r);for(var i=0;i<t.length&&tH(t[i]);)++i;for(var a=t.length;a>i&&tH(t[a-1]);)--a;return t.slice(i,a).join("\n")}(u));if(c<32&&9!==c&&10!==c&&13!==c)throw tM(e,o,"Invalid character within String: ".concat(tQ(c),"."));10===c?(++o,++a.line,a.lineStart=o):13===c?(10===s.charCodeAt(o+1)?o+=2:++o,++a.line,a.lineStart=o):92===c&&34===s.charCodeAt(o+1)&&34===s.charCodeAt(o+2)&&34===s.charCodeAt(o+3)?(u+=s.slice(l,o)+'"""',o+=4,l=o):++o}throw tM(e,o,"Unterminated string.")}(r,a,o,l,t,e);return function(e,t,r,n,i){for(var a=e.body,s=t+1,o=s,l=0,c="";s<a.length&&!isNaN(l=a.charCodeAt(s))&&10!==l&&13!==l;){if(34===l)return c+=a.slice(o,s),new tB(tq.STRING,t,s+1,r,n,i,c);if(l<32&&9!==l)throw tM(e,s,"Invalid character within String: ".concat(tQ(l),"."));if(++s,92===l){switch(c+=a.slice(o,s-1),l=a.charCodeAt(s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="	";break;case 117:var u,d,p,h,m=(u=a.charCodeAt(s+1),d=a.charCodeAt(s+2),p=a.charCodeAt(s+3),h=a.charCodeAt(s+4),tZ(u)<<12|tZ(d)<<8|tZ(p)<<4|tZ(h));if(m<0){var f=a.slice(s+1,s+5);throw tM(e,s,"Invalid character escape sequence: \\u".concat(f,"."))}c+=String.fromCharCode(m),s+=4;break;default:throw tM(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}o=++s}}throw tM(e,s,"Unterminated string.")}(r,a,o,l,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,r,n,i,a){var s,o=e.body,l=r,c=t,u=!1;if(45===l&&(l=o.charCodeAt(++c)),48===l){if((l=o.charCodeAt(++c))>=48&&l<=57)throw tM(e,c,"Invalid number, unexpected digit after 0: ".concat(tQ(l),"."))}else c=tX(e,c,l),l=o.charCodeAt(c);if(46===l&&(u=!0,l=o.charCodeAt(++c),c=tX(e,c,l),l=o.charCodeAt(c)),(69===l||101===l)&&(u=!0,(43===(l=o.charCodeAt(++c))||45===l)&&(l=o.charCodeAt(++c)),c=tX(e,c,l),l=o.charCodeAt(c)),46===l||95===(s=l)||s>=65&&s<=90||s>=97&&s<=122)throw tM(e,c,"Invalid number, expected digit but got: ".concat(tQ(l),"."));return new tB(u?tq.FLOAT:tq.INT,t,c,n,i,a,o.slice(t,c))}(r,a,s,o,l,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,r,n,i){for(var a=e.body,s=a.length,o=t+1,l=0;o!==s&&!isNaN(l=a.charCodeAt(o))&&(95===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++o;return new tB(tq.NAME,t,o,r,n,i,a.slice(t,o))}(r,a,o,l,t)}throw tM(r,a,s<32&&9!==s&&10!==s&&13!==s?"Cannot contain the invalid character ".concat(tQ(s),"."):39===s?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(tQ(s),"."))}var c=e.line,u=1+a-e.lineStart;return new tB(tq.EOF,i,i,c,u,t)}(this,t);while(t.kind===tq.COMMENT);return t},e}();function tQ(e){return isNaN(e)?tq.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function tX(e,t,r){var n=e.body,i=t,a=r;if(a>=48&&a<=57){do a=n.charCodeAt(++i);while(a>=48&&a<=57);return i}throw tM(e,i,"Invalid number, expected digit but got: ".concat(tQ(a),"."))}function tZ(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function t0(e,t){return new t1(e,t).parseDocument()}var t1=function(){function e(e,t){var r=e instanceof tW?e:new tW(e);this._lexer=new tJ(r),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(tq.NAME);return{kind:tP.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:tP.DOCUMENT,definitions:this.many(tq.SOF,this.parseDefinition,tq.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(tq.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else if(this.peek(tq.BRACE_L))return this.parseOperationDefinition();else if(this.peekDescription())return this.parseTypeSystemDefinition();throw this.unexpected()},t.parseOperationDefinition=function(){var e,t=this._lexer.token;if(this.peek(tq.BRACE_L))return{kind:tP.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var r=this.parseOperationType();return this.peek(tq.NAME)&&(e=this.parseName()),{kind:tP.OPERATION_DEFINITION,operation:r,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseOperationType=function(){var e=this.expectToken(tq.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(tq.PAREN_L,this.parseVariableDefinition,tq.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:tP.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(tq.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(tq.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(tq.DOLLAR),{kind:tP.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:tP.SELECTION_SET,selections:this.many(tq.BRACE_L,this.parseSelection,tq.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(tq.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,r=this._lexer.token,n=this.parseName();return this.expectOptionalToken(tq.COLON)?(e=n,t=this.parseName()):t=n,{kind:tP.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(tq.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(r)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(tq.PAREN_L,t,tq.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(tq.COLON),{kind:tP.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:tP.ARGUMENT,name:this.parseName(),value:(this.expectToken(tq.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(tq.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(tq.NAME)?{kind:tP.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:tP.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return(this.expectKeyword("fragment"),(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)===!0)?{kind:tP.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:tP.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case tq.BRACKET_L:return this.parseList(e);case tq.BRACE_L:return this.parseObject(e);case tq.INT:return this._lexer.advance(),{kind:tP.INT,value:t.value,loc:this.loc(t)};case tq.FLOAT:return this._lexer.advance(),{kind:tP.FLOAT,value:t.value,loc:this.loc(t)};case tq.STRING:case tq.BLOCK_STRING:return this.parseStringLiteral();case tq.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:tP.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:tP.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:tP.NULL,loc:this.loc(t)};default:return{kind:tP.ENUM,value:t.value,loc:this.loc(t)}}case tq.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:tP.STRING,value:e.value,block:e.kind===tq.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,r=this._lexer.token;return{kind:tP.LIST,values:this.any(tq.BRACKET_L,function(){return t.parseValueLiteral(e)},tq.BRACKET_R),loc:this.loc(r)}},t.parseObject=function(e){var t=this,r=this._lexer.token;return{kind:tP.OBJECT,fields:this.any(tq.BRACE_L,function(){return t.parseObjectField(e)},tq.BRACE_R),loc:this.loc(r)}},t.parseObjectField=function(e){var t=this._lexer.token,r=this.parseName();return this.expectToken(tq.COLON),{kind:tP.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(tq.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(tq.AT),{kind:tP.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return(this.expectOptionalToken(tq.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(tq.BRACKET_R),e={kind:tP.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(tq.BANG))?{kind:tP.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:tP.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===tq.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(tq.STRING)||this.peek(tq.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var r=this.parseDirectives(!0),n=this.many(tq.BRACE_L,this.parseOperationTypeDefinition,tq.BRACE_R);return{kind:tP.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:n,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(tq.COLON);var r=this.parseNamedType();return{kind:tP.OPERATION_TYPE_DEFINITION,operation:t,type:r,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var r=this.parseName(),n=this.parseDirectives(!0);return{kind:tP.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:n,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),a=this.parseFieldsDefinition();return{kind:tP.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:n,directives:i,fields:a,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if((null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(tq.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(tq.AMP)||this.peek(tq.NAME));return t}return this.delimitedMany(tq.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)===!0&&this.peek(tq.BRACE_L)&&this._lexer.lookahead().kind===tq.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(tq.BRACE_L,this.parseFieldDefinition,tq.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),n=this.parseArgumentDefs();this.expectToken(tq.COLON);var i=this.parseTypeReference(),a=this.parseDirectives(!0);return{kind:tP.FIELD_DEFINITION,description:t,name:r,arguments:n,type:i,directives:a,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(tq.PAREN_L,this.parseInputValueDef,tq.PAREN_R)},t.parseInputValueDef=function(){var e,t=this._lexer.token,r=this.parseDescription(),n=this.parseName();this.expectToken(tq.COLON);var i=this.parseTypeReference();this.expectOptionalToken(tq.EQUALS)&&(e=this.parseValueLiteral(!0));var a=this.parseDirectives(!0);return{kind:tP.INPUT_VALUE_DEFINITION,description:r,name:n,type:i,defaultValue:e,directives:a,loc:this.loc(t)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),a=this.parseFieldsDefinition();return{kind:tP.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:n,directives:i,fields:a,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var r=this.parseName(),n=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:tP.UNION_TYPE_DEFINITION,description:t,name:r,directives:n,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(tq.EQUALS)?this.delimitedMany(tq.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var r=this.parseName(),n=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:tP.ENUM_TYPE_DEFINITION,description:t,name:r,directives:n,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(tq.BRACE_L,this.parseEnumValueDefinition,tq.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),n=this.parseDirectives(!0);return{kind:tP.ENUM_VALUE_DEFINITION,description:t,name:r,directives:n,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var r=this.parseName(),n=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:tP.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:n,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(tq.BRACE_L,this.parseInputValueDef,tq.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===tq.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),r=this.optionalMany(tq.BRACE_L,this.parseOperationTypeDefinition,tq.BRACE_R);if(0===t.length&&0===r.length)throw this.unexpected();return{kind:tP.SCHEMA_EXTENSION,directives:t,operationTypes:r,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),r=this.parseDirectives(!0);if(0===r.length)throw this.unexpected();return{kind:tP.SCALAR_TYPE_EXTENSION,name:t,directives:r,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),r=this.parseImplementsInterfaces(),n=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===r.length&&0===n.length&&0===i.length)throw this.unexpected();return{kind:tP.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:n,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),r=this.parseImplementsInterfaces(),n=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===r.length&&0===n.length&&0===i.length)throw this.unexpected();return{kind:tP.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:n,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),r=this.parseDirectives(!0),n=this.parseUnionMemberTypes();if(0===r.length&&0===n.length)throw this.unexpected();return{kind:tP.UNION_TYPE_EXTENSION,name:t,directives:r,types:n,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),r=this.parseDirectives(!0),n=this.parseEnumValuesDefinition();if(0===r.length&&0===n.length)throw this.unexpected();return{kind:tP.ENUM_TYPE_EXTENSION,name:t,directives:r,values:n,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),r=this.parseDirectives(!0),n=this.parseInputFieldsDefinition();if(0===r.length&&0===n.length)throw this.unexpected();return{kind:tP.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:n,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(tq.AT);var r=this.parseName(),n=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var a=this.parseDirectiveLocations();return{kind:tP.DIRECTIVE_DEFINITION,description:t,name:r,arguments:n,repeatable:i,locations:a,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(tq.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==tY[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if((null===(t=this._options)||void 0===t?void 0:t.noLocation)!==!0)return new tU(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw tM(this._lexer.source,t.start,"Expected ".concat(t4(e),", found ").concat(t2(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind===tq.NAME&&t.value===e)this._lexer.advance();else throw tM(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(t2(t),"."))},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===tq.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return tM(this._lexer.source,t.start,"Unexpected ".concat(t2(t),"."))},t.any=function(e,t,r){this.expectToken(e);for(var n=[];!this.expectOptionalToken(r);)n.push(t.call(this));return n},t.optionalMany=function(e,t,r){if(this.expectOptionalToken(e)){var n=[];do n.push(t.call(this));while(!this.expectOptionalToken(r));return n}return[]},t.many=function(e,t,r){this.expectToken(e);var n=[];do n.push(t.call(this));while(!this.expectOptionalToken(r));return n},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var r=[];do r.push(t.call(this));while(this.expectOptionalToken(e));return r},e}();function t2(e){var t=e.value;return t4(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function t4(e){return e===tq.BANG||e===tq.DOLLAR||e===tq.AMP||e===tq.PAREN_L||e===tq.PAREN_R||e===tq.SPREAD||e===tq.COLON||e===tq.EQUALS||e===tq.AT||e===tq.BRACKET_L||e===tq.BRACKET_R||e===tq.BRACE_L||e===tq.PIPE||e===tq.BRACE_R?'"'.concat(e,'"'):e}var t3={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},t5=Object.freeze({});function t6(e){return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t3,n=void 0,i=Array.isArray(e),a=[e],s=-1,o=[],l=void 0,c=void 0,u=void 0,d=[],p=[],h=e;do{var m,f=++s===a.length,g=f&&0!==o.length;if(f){if(c=0===p.length?void 0:d[d.length-1],l=u,u=p.pop(),g){if(i)l=l.slice();else{for(var x={},b=0,y=Object.keys(l);b<y.length;b++){var v=y[b];x[v]=l[v]}l=x}for(var N=0,k=0;k<o.length;k++){var S=o[k][0],E=o[k][1];i&&(S-=N),i&&null===E?(l.splice(S,1),N++):l[S]=E}}s=n.index,a=n.keys,o=n.edits,i=n.inArray,n=n.prev}else{if(c=u?i?s:a[s]:void 0,null==(l=u?u[c]:h))continue;u&&d.push(c)}var w=void 0;if(!Array.isArray(l)){if(!tK(l))throw Error("Invalid AST Node: ".concat(tV(l,[]),"."));var T=function(e,t,r){var n=e[t];if(n){if(!r&&"function"==typeof n)return n;var i=r?n.leave:n.enter;if("function"==typeof i)return i}else{var a=r?e.leave:e.enter;if(a){if("function"==typeof a)return a;var s=a[t];if("function"==typeof s)return s}}}(t,l.kind,f);if(T){if((w=T.call(t,l,c,u,d,p))===t5)break;if(!1===w){if(!f){d.pop();continue}}else if(void 0!==w&&(o.push([c,w]),!f)){if(tK(w))l=w;else{d.pop();continue}}}}void 0===w&&g&&o.push([c,l]),f?d.pop():(n={inArray:i,index:s,keys:a,edits:o,prev:n},a=(i=Array.isArray(l))?l:null!==(m=r[l.kind])&&void 0!==m?m:[],s=-1,o=[],u&&p.push(u),u=l)}while(void 0!==n);return 0!==o.length&&(h=o[o.length-1][1]),h}(e,{leave:t8})}var t8={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return t9(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,r=e.name,n=rt("(",t9(e.variableDefinitions,", "),")"),i=t9(e.directives," "),a=e.selectionSet;return r||i||n||"query"!==t?t9([t,t9([r,n]),i,a]," "):a},VariableDefinition:function(e){var t=e.variable,r=e.type,n=e.defaultValue,i=e.directives;return t+": "+r+rt(" = ",n)+rt(" ",t9(i," "))},SelectionSet:function(e){return re(e.selections)},Field:function(e){var t=e.alias,r=e.name,n=e.arguments,i=e.directives,a=e.selectionSet,s=rt("",t,": ")+r,o=s+rt("(",t9(n,", "),")");return o.length>80&&(o=s+rt("(\n",rr(t9(n,"\n")),"\n)")),t9([o,t9(i," "),a]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+rt(" ",t9(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,r=e.directives,n=e.selectionSet;return t9(["...",rt("on ",t),t9(r," "),n]," ")},FragmentDefinition:function(e){var t=e.name,r=e.typeCondition,n=e.variableDefinitions,i=e.directives,a=e.selectionSet;return"fragment ".concat(t).concat(rt("(",t9(n,", "),")")," ")+"on ".concat(r," ").concat(rt("",t9(i," ")," "))+a},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var r=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=-1===e.indexOf("\n"),i=" "===e[0]||"	"===e[0],a='"'===e[e.length-1],s="\\"===e[e.length-1],o=!n||a||s||r,l="";return o&&!(n&&i)&&(l+="\n"+t),l+=t?e.replace(/\n/g,"\n"+t):e,o&&(l+="\n"),'"""'+l.replace(/"""/g,'\\"""')+'"""'}(r,"description"===t?"":"  "):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+t9(e.values,", ")+"]"},ObjectValue:function(e){return"{"+t9(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+rt("(",t9(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:t7(function(e){var t=e.directives,r=e.operationTypes;return t9(["schema",t9(t," "),re(r)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:t7(function(e){return t9(["scalar",e.name,t9(e.directives," ")]," ")}),ObjectTypeDefinition:t7(function(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return t9(["type",t,rt("implements ",t9(r," & ")),t9(n," "),re(i)]," ")}),FieldDefinition:t7(function(e){var t=e.name,r=e.arguments,n=e.type,i=e.directives;return t+(ri(r)?rt("(\n",rr(t9(r,"\n")),"\n)"):rt("(",t9(r,", "),")"))+": "+n+rt(" ",t9(i," "))}),InputValueDefinition:t7(function(e){var t=e.name,r=e.type,n=e.defaultValue,i=e.directives;return t9([t+": "+r,rt("= ",n),t9(i," ")]," ")}),InterfaceTypeDefinition:t7(function(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return t9(["interface",t,rt("implements ",t9(r," & ")),t9(n," "),re(i)]," ")}),UnionTypeDefinition:t7(function(e){var t=e.name,r=e.directives,n=e.types;return t9(["union",t,t9(r," "),n&&0!==n.length?"= "+t9(n," | "):""]," ")}),EnumTypeDefinition:t7(function(e){var t=e.name,r=e.directives,n=e.values;return t9(["enum",t,t9(r," "),re(n)]," ")}),EnumValueDefinition:t7(function(e){return t9([e.name,t9(e.directives," ")]," ")}),InputObjectTypeDefinition:t7(function(e){var t=e.name,r=e.directives,n=e.fields;return t9(["input",t,t9(r," "),re(n)]," ")}),DirectiveDefinition:t7(function(e){var t=e.name,r=e.arguments,n=e.repeatable,i=e.locations;return"directive @"+t+(ri(r)?rt("(\n",rr(t9(r,"\n")),"\n)"):rt("(",t9(r,", "),")"))+(n?" repeatable":"")+" on "+t9(i," | ")}),SchemaExtension:function(e){var t=e.directives,r=e.operationTypes;return t9(["extend schema",t9(t," "),re(r)]," ")},ScalarTypeExtension:function(e){return t9(["extend scalar",e.name,t9(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return t9(["extend type",t,rt("implements ",t9(r," & ")),t9(n," "),re(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return t9(["extend interface",t,rt("implements ",t9(r," & ")),t9(n," "),re(i)]," ")},UnionTypeExtension:function(e){var t=e.name,r=e.directives,n=e.types;return t9(["extend union",t,t9(r," "),n&&0!==n.length?"= "+t9(n," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,r=e.directives,n=e.values;return t9(["extend enum",t,t9(r," "),re(n)]," ")},InputObjectTypeExtension:function(e){var t=e.name,r=e.directives,n=e.fields;return t9(["extend input",t,t9(r," "),re(n)]," ")}};function t7(e){return function(t){return t9([t.description,e(t)],"\n")}}function t9(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e}).join(r))&&void 0!==t?t:""}function re(e){return rt("{\n",rr(t9(e,"\n")),"\n}")}function rt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+r:""}function rr(e){return rt("  ",e.replace(/\n/g,"\n  "))}function rn(e){return -1!==e.indexOf("\n")}function ri(e){return null!=e&&e.some(rn)}var ra="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function rs(e){if(e instanceof ta)return e;if(null!=e){if(v(e[ti]))return new ta(function(t){var r=e[ti]();if(v(r.subscribe))return r.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(e&&"number"==typeof e.length&&"function"!=typeof e)return new ta(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()});if(v(null==e?void 0:e.then))return new ta(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,O)});if(Symbol.asyncIterator&&v(null==e?void 0:e[Symbol.asyncIterator]))return ro(e);if(v(null==e?void 0:e[ra]))return new ta(function(t){var r,n;try{for(var i=(0,k.XA)(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(t.next(s),t.closed)return}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()});if(v(null==e?void 0:e.getReader))return ro(function(e){return(0,k.FC)(this,arguments,function(){var t,r,n;return(0,k.Jh)(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,k.qq)(t.read())];case 3:if(n=(r=i.sent()).value,!r.done)return[3,5];return[4,(0,k.qq)(void 0)];case 4:return[2,i.sent()];case 5:return[4,(0,k.qq)(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}(e))}throw TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ro(e){return new ta(function(t){(function(e,t){var r,n,i,a;return(0,k.mG)(this,void 0,void 0,function(){var s;return(0,k.Jh)(this,function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),r=(0,k.KL)(e),o.label=1;case 1:return[4,r.next()];case 2:if((n=o.sent()).done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:o.sent()},[3,11];case 6:if(o.trys.push([6,,9,10]),!(n&&!n.done&&(a=r.return)))return[3,8];return[4,a.call(r)];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}var rl=r(9487),rc=r(7042),ru=r(5425);class rd extends ru._{get response(){return this._response?rp(this._response):void 0}constructor(e){super(e),this.constructor=rd,Object.setPrototypeOf(this,rd.prototype),e.response&&(this._response=e.response)}}let rp=e=>({...e,headers:{...e.headers}});class rh extends rd{constructor(e){super(e),this.constructor=rh,Object.setPrototypeOf(this,rh.prototype)}}class rm extends rh{constructor(e={}){super({name:"CanceledError",message:"Request is canceled by user",...e}),this.constructor=rm,Object.setPrototypeOf(this,rm.prototype)}}let rf=e=>!!e&&e instanceof rm;(a||(a={})).InvalidApiName="InvalidApiName",a.InvalidApiName;var rg=r(8695);let rx=async e=>{if(!e)return;let t=await (0,rg.f)(rb(e));if(t){let r=await e.body?.text();return ry(t,{statusCode:e.statusCode,headers:e.headers,body:r})}},rb=e=>{let t;let r=new Proxy(e.body,{get:(e,r,n)=>"json"===r?async()=>{t||(t=e.text());try{return JSON.parse(await t)}catch(e){return{}}}:"text"===r?async()=>(t||(t=e.text()),t):Reflect.get(e,r,n)});return new Proxy(e,{get:(e,t,n)=>"body"===t?r:Reflect.get(e,t,n)})},ry=(e,t)=>Object.assign(new rh({name:e?.name,message:e.message,underlyingError:e,response:t}),{$metadata:e.$metadata});var rv=r(2408);let rN=new rv.k("RestApis");var rk=r(3241),rS=r(5191);let rE="execute-api",rw=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,rT=(e,t)=>{let{service:r=rE,region:n="us-east-1"}=t?.amplify.getConfig()?.API?.REST?.[t?.apiName]??{},{hostname:i}=e,[,a,s]=rw.exec(i)??[];return a===rE?{service:a,region:s??n}:"appsync-api"===a?{service:"appsync",region:s??n}:{service:r,region:n}},rj=(e,t)=>{let r={};for(let t in e)r[t.toLowerCase()]=e[t];if(t){let e=r["content-type"];e&&(e.startsWith("application/json")||e.startsWith("application/")&&e.includes("+json"))||(r["content-type"]="application/json; charset=UTF-8"),t instanceof FormData&&delete r["content-type"]}return r};var rA=r(6448),rC=r(9532),rO=r(1893);let rD=e=>Object.keys(e).map(e=>e.toLowerCase()).sort().join(";"),rI="aws4_request",r_="AWS4-HMAC-SHA256",rL=(e,t,r)=>`${e}/${t}/${r}/${rI}`,rR=e=>{let t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},rM=({credentials:e,signingDate:t=new Date,signingRegion:r,signingService:n,uriEscapePath:i=!0})=>{let{accessKeyId:a,secretAccessKey:s,sessionToken:o}=e,{longDate:l,shortDate:c}=rR(t);return{accessKeyId:a,credentialScope:rL(c,r,n),longDate:l,secretAccessKey:s,sessionToken:o,shortDate:c,signingRegion:r,signingService:n,uriEscapePath:i}};var rP=r(8189),rF=r(1957);let r$=(e,t)=>{let r=new rP.f(e??void 0);return r.update(t),r.digestSync()},rU=(e,t)=>{let r=r$(e,t);return(0,rF.N)(r)},rB=e=>Object.entries(e).map(([e,t])=>({key:e.toLowerCase(),value:t?.trim().replace(/\s+/g," ")??""})).sort((e,t)=>e.key<t.key?-1:1).map(e=>`${e.key}:${e.value}
`).join(""),rK=e=>Array.from(e).sort(([e,t],[r,n])=>e===r?t<n?-1:1:e<r?-1:1).map(([e,t])=>`${rq(e)}=${rq(t)}`).join("&"),rq=e=>encodeURIComponent(e).replace(/[!'()*]/g,rG),rG=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,rV=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/",rz=e=>null==e?"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":rW(e)?rU(null,e):"UNSIGNED-PAYLOAD",rW=e=>"string"==typeof e||ArrayBuffer.isView(e)||rY(e),rY=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),rH=({body:e,headers:t,method:r,url:n},i=!0)=>[r,rV(n.pathname,i),rK(n.searchParams),rB(t),rD(t),rz(e)].join("\n"),rJ=(e,t,r,n)=>{let i=r$(`AWS4${e}`,t),a=r$(i,r),s=r$(a,n);return r$(s,rI)},rQ=(e,t,r)=>[r_,e,t,r].join("\n"),rX=(e,{credentialScope:t,longDate:r,secretAccessKey:n,shortDate:i,signingRegion:a,signingService:s,uriEscapePath:o})=>{let l=rQ(r,t,rU(null,rH(e,o)));return rU(rJ(n,i,a,s),l)},rZ=(e,t)=>{let r=rM(t),{accessKeyId:n,credentialScope:i,longDate:a,sessionToken:s}=r,o={...e.headers};o.host=e.url.host,o["x-amz-date"]=a,s&&(o["x-amz-security-token"]=s);let l={...e,headers:o},c=rX(l,r),u=`Credential=${n}/${i}`,d=`SignedHeaders=${rD(o)}`,p=`Signature=${c}`;return o.authorization=`${r_} ${u}, ${d}, ${p}`,l},r0=e=>new Date(Date.now()+e),r1=(e,t)=>Math.abs(r0(t).getTime()-e)>=3e5,r2=(e,t)=>r1(e,t)?e-Date.now():t,r4=({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"];var r3=r(4144);let r5=(0,r3.V)(rA.S,[rC.n,rO.d,({credentials:e,region:t,service:r,uriEscapePath:n=!0})=>{let i;return(a,s)=>async function(o){i=i??0;let l={credentials:"function"==typeof e?await e({forceRefresh:!!s?.isCredentialsExpired}):e,signingDate:r0(i),signingRegion:t,signingService:r,uriEscapePath:n},c=await rZ(o,l),u=await a(c),d=r4(u);return d&&(i=r2(Date.parse(d),i)),u}}]),r6=(0,r3.V)(rA.S,[rC.n,rO.d]),r8=async(e,t,r,n)=>{let i;let{url:a,method:s,headers:o,body:l,withCredentials:c,abortSignal:u,retryStrategy:d}=t,p=l?l instanceof FormData?l:JSON.stringify(l??""):void 0,h={url:a,headers:rj(o,l),method:s,body:p},m={retryDecider:r7(d??e?.libraryOptions?.API?.REST?.retryStrategy),computeDelay:rk.k,withCrossDomainCredentials:c,abortSignal:u},f=r(h,n),g=await r9(e);if(f&&g){let e=rT(a),t=n?.service??e.service,r=n?.region??e.region;i=await r5(h,{...m,credentials:g,region:r,service:t})}else i=await r6(h,{...m});return{statusCode:i.statusCode,headers:i.headers,body:i.body}},r7=e=>"no-retry"===e?.strategy?()=>Promise.resolve({retryable:!1}):(0,rS.j)(rx),r9=async e=>{try{let{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch(e){rN.debug("No credentials available, the request will be unsigned.")}return null},ne=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,nt=new WeakMap,nr=(e,{url:t,options:r,abortController:n})=>{let i=n??new AbortController,a=(function(e,t){let r;let n=e=>!!t,i=new AbortController,a=i.signal,s=t?.signal,o=async()=>{try{let t=await (n(e)?e():e(a));if(t.statusCode>=300)throw await rx(t);return t}catch(n){let e=s??a,t=r??e.reason;if("AbortError"===n.name||e?.aborted===!0){let e=new rm({...t&&{message:t},underlyingError:n,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw rN.debug(n),e}throw rN.debug(n),n}};return n()?o():{response:o(),cancel:e=>{!0!==a.aborted&&(i.abort(e),e&&a.reason!==e&&(r=e))}}})(async()=>r8(e,{url:t,method:"POST",...r,abortSignal:i.signal,retryStrategy:{strategy:"jittered-exponential-backoff"}},ne,r?.signingServiceInfo),i).finally(()=>{nt.delete(a)});return a},nn=(e,t)=>{let r=nt.get(e);return!!r&&(r.abort(t),t&&r.signal.reason!==t&&(r.signal.reason=t),!0)},ni=(e,t)=>{nt.set(e,t)};var na=r(5509);let ns=[400,401,403],no=["BadRequestException","UnauthorizedException"];(function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error",e.EVENT_SUBSCRIBE="subscribe",e.EVENT_PUBLISH="publish",e.EVENT_SUBSCRIBE_ACK="subscribe_success",e.EVENT_PUBLISH_ACK="publish_success",e.EVENT_STOP="unsubscribe",e.EVENT_COMPLETE="unsubscribe_success"})(s||(s={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(o||(o={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(l||(l={}));let nl={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"};class nc extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}var nu=r(9951);let nd=e=>e&&e.nonRetryable;var np=r(3519),nh=r(9970),nm=r(8176);let nf=new rv.k("retryUtil");async function ng(e,t,r,n){if("function"!=typeof e)throw Error("functionToRetry must be a function");return new Promise(async(i,a)=>{let s,o,l=0,c=!1,u=()=>{};for(n&&n.then(()=>{c=!0,clearTimeout(s),u()});!c;){l++,nf.debug(`${e.name} attempt #${l} with this vars: ${JSON.stringify(t)}`);try{i(await e(...t));return}catch(i){if(o=i,nf.debug(`error on ${e.name}`,i),nd(i)){nf.debug(`${e.name} non retryable error`,i),a(i);return}let n=r(l,t,i);if(nf.debug(`${e.name} retrying in ${n} ms`),!1===n||c){a(i);return}await new Promise(e=>{s=setTimeout(u=e,n)})}}a(o)})}let nx=(e,t,r=nh.t,n)=>ng(e,t,(0,nm.k)(r),n);(function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"})(c||(c={})),function(e){e.Connected="Connected",e.ConnectedPendingNetwork="ConnectedPendingNetwork",e.ConnectionDisrupted="ConnectionDisrupted",e.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",e.Connecting="Connecting",e.ConnectedPendingDisconnect="ConnectedPendingDisconnect",e.Disconnected="Disconnected",e.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"}(u||(u={}));let nb=()=>{if("undefined"==typeof self)return!1;let e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope};class ny{networkMonitor(e){let t=nb()?self:"undefined"!=typeof window&&window;return t?new ta(e=>{e.next({online:t.navigator.onLine});let r=()=>{e.next({online:!0})},n=()=>{e.next({online:!1})};return t.addEventListener("online",r),t.addEventListener("offline",n),ny._observers.push(e),()=>{t.removeEventListener("online",r),t.removeEventListener("offline",n),ny._observers=ny._observers.filter(t=>t!==e)}}):rs([{online:!0}])}static _observerOverride(e){for(let t of this._observers){if(t.closed){this._observers=this._observers.filter(e=>e!==t);continue}t?.next&&t.next(e)}}}ny._observers=[];let nv=()=>new ny().networkMonitor(),nN={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class nk{constructor(){this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=nv().subscribe(({online:e})=>{this.record(e?nN.ONLINE:nN.OFFLINE),this._initialNetworkStateSubscription?.unsubscribe()}),this._linkedConnectionStateObservable=new ta(e=>{e.next(this._linkedConnectionState),this._linkedConnectionStateObserver=e})}enableNetworkMonitoring(){this._initialNetworkStateSubscription?.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=nv().subscribe(({online:e})=>{this.record(e?nN.ONLINE:nN.OFFLINE)}))}disableNetworkMonitoring(){this._networkMonitoringSubscription?.unsubscribe(),this._networkMonitoringSubscription=void 0}get connectionStateObservable(){var e;let t;return this._linkedConnectionStateObservable.pipe(V(e=>this.connectionStatesTranslator(e))).pipe((e=e=>{let r=e!==t;return t=e,r},N(function(t,r){var n,i,a,s=0;t.subscribe(new G(r,function(t){return e.call(void 0,t,s++)&&r.next(t)},void 0,void 0,void 0))})))}record(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();let t={...this._linkedConnectionState,...e};this._linkedConnectionState={...t},this._linkedConnectionStateObserver?.next(this._linkedConnectionState)}connectionStatesTranslator({connectionState:e,networkState:t,intendedConnectionState:r,keepAliveState:n}){return"connected"===e&&"disconnected"===t?u.ConnectedPendingNetwork:"connected"===e&&"disconnected"===r?u.ConnectedPendingDisconnect:"disconnected"===e&&"connected"===r&&"disconnected"===t?u.ConnectionDisruptedPendingNetwork:"disconnected"===e&&"connected"===r?u.ConnectionDisrupted:"connected"===e&&"unhealthy"===n?u.ConnectedPendingKeepAlive:"connecting"===e?u.Connecting:"disconnected"===e?u.Disconnected:u.Connected}}!function(e){e.START_RECONNECT="START_RECONNECT",e.HALT_RECONNECT="HALT_RECONNECT"}(d||(d={}));class nS{constructor(){this.reconnectObservers=[]}addObserver(e){this.reconnectObservers.push(e)}record(e){e===d.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(()=>{this._triggerReconnect(),this.reconnectIntervalId=setInterval(()=>{this._triggerReconnect()},6e4)},5e3)),e===d.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach(e=>{e.complete?.()})}_triggerReconnect(){this.reconnectObservers.forEach(e=>{e.next?.()})}}let nE="wss://",nw=/^https:\/\/\w{26}\.appsync-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,nT=/^https:\/\/\w{26}\.\w+-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/event$/i,nj="/realtime",nA=e=>null===e.match(nw),nC=e=>null!==e.match(nT),nO=e=>{let t=e??"";return t=(t=nC(t)?t.concat(nj).replace("ddpg-api","grt-gamma").replace("appsync-api","appsync-realtime-api"):nA(t)?t.concat(nj):t.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta").replace("ddpg-api","grt-gamma")).replace("https://",nE).replace("http://",nE),new rl.a(t)},nD=e=>{if(!e)return{};if("Authorization"in e){let{Authorization:t,...r}=e;return r}return e},nI=e=>{let t=nD(e),r=new rl.z;return Object.entries(t).forEach(([e,t])=>{r.append(e,t)}),r},n_=(e,t)=>{let r=nO(e),n=new rl.z(r.search);for(let[e,r]of t.entries())n.append(e,r);return r.search=n.toString(),r.toString()},nL=async e=>{let{appSyncGraphqlEndpoint:t,query:r,libraryConfigHeaders:n=()=>({}),additionalHeaders:i={},authToken:a}=e,s={},o=await n();return s="function"==typeof i?await i({url:t||"",queryString:r||""}):i,a&&(s={...s,Authorization:a}),{additionalCustomHeaders:s,libraryConfigHeaders:o}};var nR=r(7639);let nM=new rv.k("AWSAppSyncRealTimeProvider Auth"),nP=async({host:e})=>{let t=await (0,nR.y)();return{Authorization:t?.tokens?.accessToken?.toString(),host:e}},nF=async({apiKey:e,host:t})=>({host:t,"x-amz-date":new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),"x-api-key":e}),n$=async({payload:e,canonicalUri:t,appSyncGraphqlEndpoint:r,region:n})=>{let i={region:n,service:"appsync"},a=(await (0,nR.y)()).credentials,s={url:`${r}${t}`,data:e,method:"POST",headers:{...nl}};return rZ({headers:s.headers,method:s.method,url:new rl.a(s.url),body:s.data},{credentials:a,signingRegion:i.region,signingService:i.service}).headers},nU=async({host:e,additionalCustomHeaders:t})=>{if(!t?.Authorization)throw Error("No auth token specified");return{Authorization:t.Authorization,host:e}},nB=async({apiKey:e,authenticationType:t,canonicalUri:r,appSyncGraphqlEndpoint:n,region:i,additionalCustomHeaders:a,payload:s})=>{let o={apiKey:nF,iam:n$,oidc:nP,userPool:nP,lambda:nU,none:nU};if(t&&o[t]){let l=o[t],c=n?new rl.a(n).host:void 0;return nM.debug(`Authenticating with ${JSON.stringify(t)}`),await l({payload:s,canonicalUri:r,appSyncGraphqlEndpoint:n,apiKey:"apiKey"===t?e:void 0,region:i,host:c,additionalCustomHeaders:a})}nM.debug(`Authentication type ${t} not supported`)},nK=e=>{y.Xb.dispatch("api",e,"PubSub",y.SQ)};class nq{constructor(e){this.subscriptionObserverMap=new Map,this.allowNoSubscriptions=!1,this.socketStatus=l.CLOSED,this.keepAliveTimestamp=Date.now(),this.promiseArray=[],this.connectionStateMonitor=new nk,this.reconnectionMonitor=new nS,this._establishConnection=async(e,t)=>{this.logger.debug(`Establishing WebSocket connection to ${e}`);try{await this._openConnection(e,t),await this._initiateHandshake()}catch(r){let{errorType:e,errorCode:t}=r;if(ns.includes(t)||no.includes(e))throw new nc(e);if(e)throw Error(e);throw r}},this.logger=new rv.k(e.providerName),this.wsProtocolName=e.wsProtocolName,this.wsConnectUri=e.connectUri,this.connectionStateMonitorSubscription=this._startConnectionStateMonitoring()}close(){return this.socketStatus=l.CLOSED,this.connectionStateMonitor.record(nN.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close(),new Promise((e,t)=>{this.awsRealTimeSocket?(this.awsRealTimeSocket.onclose=t=>{this._closeSocket(),this.subscriptionObserverMap=new Map,this.awsRealTimeSocket=void 0,e()},this.awsRealTimeSocket.onerror=e=>{t(e)},this.awsRealTimeSocket.close()):e()})}subscribe(e,t){return new ta(r=>{if(!e?.appSyncGraphqlEndpoint){r.error({errors:[{...new tL("Subscribe only available for AWS AppSync endpoint")}]}),r.complete();return}let n=!1,i=(0,nu.r)(),a=()=>{n||(n=!0,this._startSubscriptionWithAWSAppSyncRealTime({options:e,observer:r,subscriptionId:i,customUserAgentDetails:t}).catch(e=>{this.logger.debug(`${c.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${e}`),this._closeSocket()}).finally(()=>{n=!1}))},s=new ta(e=>{this.reconnectionMonitor.addObserver(e)}).subscribe(()=>{a()});return a(),async()=>{await this._cleanupSubscription(i,s)}})}async connect(e){this.socketStatus!==l.READY&&await this._connectWebSocket(e)}async publish(e,t){if(this.socketStatus!==l.READY)throw Error("Subscription has not been initialized");return this._publishMessage(e,t)}async _connectWebSocket(e){let{apiKey:t,appSyncGraphqlEndpoint:r,authenticationType:n,region:i}=e,{additionalCustomHeaders:a}=await nL(e);this.connectionStateMonitor.record(nN.OPENING_CONNECTION),await this._initializeWebSocketConnection({apiKey:t,appSyncGraphqlEndpoint:r,authenticationType:n,region:i,additionalCustomHeaders:a})}async _publishMessage(e,t){let r=(0,nu.r)(),{additionalCustomHeaders:n,libraryConfigHeaders:i}=await nL(e),a=await this._prepareSubscriptionPayload({options:e,subscriptionId:r,customUserAgentDetails:t,additionalCustomHeaders:n,libraryConfigHeaders:i,publish:!0});return new Promise((e,t)=>{if(this.awsRealTimeSocket){let n=i=>{let a=JSON.parse(i.data);if(a.id===r&&"publish_success"===a.type&&(this.awsRealTimeSocket&&this.awsRealTimeSocket.removeEventListener("message",n),o(),e()),a.errors&&a.errors.length>0){let e=a.errors.map(e=>e.errorType);o(),t(Error(`Publish errors: ${e.join(", ")}`))}},i=e=>{o(),t(Error(`WebSocket error: ${e}`))},s=()=>{o(),t(Error("WebSocket is closed"))},o=()=>{this.awsRealTimeSocket?.removeEventListener("message",n),this.awsRealTimeSocket?.removeEventListener("error",i),this.awsRealTimeSocket?.removeEventListener("close",s)};this.awsRealTimeSocket.addEventListener("message",n),this.awsRealTimeSocket.addEventListener("error",i),this.awsRealTimeSocket.addEventListener("close",s),this.awsRealTimeSocket.send(a)}else t(Error("WebSocket is not connected"))})}async _cleanupSubscription(e,t){t?.unsubscribe();try{await this._waitForSubscriptionToBeConnected(e);let{subscriptionState:t}=this.subscriptionObserverMap.get(e)||{};if(!t)return;if(t===o.CONNECTED)this._sendUnsubscriptionMessage(e);else throw Error("Subscription never connected")}catch(e){this.logger.debug(`Error while unsubscribing ${e}`)}finally{this._removeSubscriptionObserver(e)}}_startConnectionStateMonitoring(){return this.connectionStateMonitor.connectionStateObservable.subscribe(e=>{nK({event:"ConnectionStateChange",data:{provider:this,connectionState:e},message:`Connection state is ${e}`}),this.connectionState=e,e===u.ConnectionDisrupted&&this.reconnectionMonitor.record(d.START_RECONNECT),[u.Connected,u.ConnectedPendingDisconnect,u.ConnectedPendingKeepAlive,u.ConnectedPendingNetwork,u.ConnectionDisruptedPendingNetwork,u.Disconnected].includes(e)&&this.reconnectionMonitor.record(d.HALT_RECONNECT)})}async _startSubscriptionWithAWSAppSyncRealTime({options:e,observer:t,subscriptionId:r,customUserAgentDetails:n}){let{query:i,variables:a}=e;this.subscriptionObserverMap.set(r,{observer:t,query:i??"",variables:a??{},subscriptionState:o.PENDING,startAckTimeoutId:void 0});let{additionalCustomHeaders:s,libraryConfigHeaders:l}=await nL(e),c=await this._prepareSubscriptionPayload({options:e,subscriptionId:r,customUserAgentDetails:n,additionalCustomHeaders:s,libraryConfigHeaders:l});try{await this._connectWebSocket(e)}catch(e){this._logStartSubscriptionError(r,t,e);return}let{subscriptionFailedCallback:u,subscriptionReadyCallback:d}=this.subscriptionObserverMap.get(r)??{};this.subscriptionObserverMap.set(r,{observer:t,subscriptionState:o.PENDING,query:i??"",variables:a??{},subscriptionReadyCallback:d,subscriptionFailedCallback:u,startAckTimeoutId:setTimeout(()=>{this._timeoutStartSubscriptionAck(r)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(c)}_logStartSubscriptionError(e,t,r){this.logger.debug({err:r});let n=String(r.message??"");if(this._closeSocket(),this.connectionState!==u.ConnectionDisruptedPendingNetwork){nd(r)?t.error({errors:[{...new tL(`${c.CONNECTION_FAILED}: ${n}`)}]}):this.logger.debug(`${c.CONNECTION_FAILED}: ${n}`);let{subscriptionFailedCallback:i}=this.subscriptionObserverMap.get(e)||{};"function"==typeof i&&i()}}async _waitForSubscriptionToBeConnected(e){let t=this.subscriptionObserverMap.get(e);if(t){let{subscriptionState:r}=t;if(r===o.PENDING)return new Promise((r,n)=>{let{observer:i,subscriptionState:a,variables:s,query:o}=t;this.subscriptionObserverMap.set(e,{observer:i,subscriptionState:a,variables:s,query:o,subscriptionReadyCallback:r,subscriptionFailedCallback:n})})}}_sendUnsubscriptionMessage(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===l.READY){let t=this._unsubscribeMessage(e),r=JSON.stringify(t);this.awsRealTimeSocket.send(r)}}catch(e){this.logger.debug({err:e})}}_removeSubscriptionObserver(e){this.subscriptionObserverMap.delete(e),this.allowNoSubscriptions||setTimeout(this._closeSocketIfRequired.bind(this),1e3)}_closeSocketIfRequired(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=l.CLOSED;return}if(this.connectionStateMonitor.record(nN.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{this.logger.debug("closing WebSocket...");let e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=l.CLOSED,this._closeSocket()}}}maintainKeepAlive(){this.keepAliveTimestamp=Date.now()}keepAliveHeartbeat(e){let t=Date.now();t-this.keepAliveTimestamp>65e3?this.connectionStateMonitor.record(nN.KEEP_ALIVE_MISSED):this.connectionStateMonitor.record(nN.KEEP_ALIVE),t-this.keepAliveTimestamp>e&&this._errorDisconnect(c.TIMEOUT_DISCONNECT)}_handleIncomingSubscriptionMessage(e){if("string"!=typeof e.data)return;let[t,r]=this._handleSubscriptionData(e);if(t){this.maintainKeepAlive();return}let{type:n,id:i,payload:a}=r,{observer:l=null,query:u="",variables:d={},startAckTimeoutId:p,subscriptionReadyCallback:h,subscriptionFailedCallback:m}=this.subscriptionObserverMap.get(i)||{};if(n===s.GQL_START_ACK||n===s.EVENT_SUBSCRIBE_ACK){this.logger.debug(`subscription ready for ${JSON.stringify({query:u,variables:d})}`),"function"==typeof h&&h(),p&&clearTimeout(p),nK({event:c.SUBSCRIPTION_ACK,data:{query:u,variables:d},message:"Connection established for subscription"});let e=o.CONNECTED;l&&this.subscriptionObserverMap.set(i,{observer:l,query:u,variables:d,startAckTimeoutId:void 0,subscriptionState:e,subscriptionReadyCallback:h,subscriptionFailedCallback:m}),this.connectionStateMonitor.record(nN.CONNECTION_ESTABLISHED);return}if(n===s.GQL_CONNECTION_KEEP_ALIVE){this.maintainKeepAlive();return}if(n===s.GQL_ERROR){let e=o.FAILED;l&&(this.subscriptionObserverMap.set(i,{observer:l,query:u,variables:d,startAckTimeoutId:p,subscriptionReadyCallback:h,subscriptionFailedCallback:m,subscriptionState:e}),this.logger.debug(`${c.CONNECTION_FAILED}: ${JSON.stringify(a??r)}`),l.error({errors:[{...new tL(`${c.CONNECTION_FAILED}: ${JSON.stringify(a??r)}`)}]}),p&&clearTimeout(p),"function"==typeof m&&m())}}_errorDisconnect(e){this.logger.debug(`Disconnect error: ${e}`),this.awsRealTimeSocket&&(this._closeSocket(),this.awsRealTimeSocket.close()),this.socketStatus=l.CLOSED}_closeSocket(){this.keepAliveHeartbeatIntervalId&&(clearInterval(this.keepAliveHeartbeatIntervalId),this.keepAliveHeartbeatIntervalId=void 0),this.connectionStateMonitor.record(nN.CLOSED)}_timeoutStartSubscriptionAck(e){let t=this.subscriptionObserverMap.get(e);if(t){let{observer:r,query:n,variables:i}=t;if(!r)return;this.subscriptionObserverMap.set(e,{observer:r,query:n,variables:i,subscriptionState:o.FAILED}),this._closeSocket(),this.logger.debug("timeoutStartSubscription",JSON.stringify({query:n,variables:i}))}}_initializeWebSocketConnection({appSyncGraphqlEndpoint:e,authenticationType:t,apiKey:r,region:n,additionalCustomHeaders:i}){if(this.socketStatus!==l.READY)return new Promise(async(a,s)=>{if(this.promiseArray.push({res:a,rej:s}),this.socketStatus===l.CLOSED)try{this.socketStatus=l.CONNECTING;let a=await nB({authenticationType:t,payload:"{}",canonicalUri:this.wsConnectUri,apiKey:r,appSyncGraphqlEndpoint:e,region:n,additionalCustomHeaders:i}),s=a?JSON.stringify(a):"",o=np.u.convert(s,{urlSafe:!0,skipPadding:!0}),c=`header-${o}`,u=nI(i),d=n_(e,u);await this._establishRetryableConnection(d,c),this.promiseArray.forEach(({res:e})=>{this.logger.debug("Notifying connection successful"),e()}),this.socketStatus=l.READY,this.promiseArray=[]}catch(e){this.logger.debug("Connection exited with",e),this.promiseArray.forEach(({rej:t})=>{t(e)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=l.CLOSED}})}async _establishRetryableConnection(e,t){this.logger.debug("Establishing retryable connection"),await nx(this._establishConnection.bind(this),[e,t],5e3)}async _openConnection(e,t){return new Promise((r,n)=>{let i=this._getNewWebSocket(e,[this.wsProtocolName,t]);i.onerror=()=>{this.logger.debug("WebSocket connection error")},i.onclose=()=>{this._closeSocket(),n(Error("Connection handshake error"))},i.onopen=()=>{this.awsRealTimeSocket=i,r()}})}_getNewWebSocket(e,t){return new WebSocket(e,t)}async _initiateHandshake(){return new Promise((e,t)=>{if(!this.awsRealTimeSocket){t(Error("awsRealTimeSocket undefined"));return}let r=!1;this.awsRealTimeSocket.onerror=e=>{this.logger.debug(`WebSocket error ${JSON.stringify(e)}`)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),t(Error(JSON.stringify(e)))},this.awsRealTimeSocket.onmessage=n=>{if("string"!=typeof n.data)return;this.logger.debug(`subscription message from AWS AppSyncRealTime: ${n.data} `);let i=JSON.parse(n.data),{type:a}=i,o=this._extractConnectionTimeout(i);if(a===s.GQL_CONNECTION_ACK){r=!0,this._registerWebsocketHandlers(o),e("Connected to AWS AppSyncRealTime");return}if(a===s.GQL_CONNECTION_ERROR){let{errorType:e,errorCode:r}=this._extractErrorCodeAndType(i);t({errorType:e,errorCode:r})}};let n={type:s.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(n));let i=e=>{e||(this.connectionStateMonitor.record(nN.CONNECTION_FAILED),t(Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(()=>{i(r)},15e3)})}_registerWebsocketHandlers(e){this.awsRealTimeSocket&&(this.keepAliveHeartbeatIntervalId=setInterval(()=>{this.keepAliveHeartbeat(e)},5e3),this.awsRealTimeSocket.onmessage=this._handleIncomingSubscriptionMessage.bind(this),this.awsRealTimeSocket.onerror=e=>{this.logger.debug(e),this._errorDisconnect(c.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),this._errorDisconnect(c.CONNECTION_CLOSED)})}}let nG="AWSAppSyncRealTimeProvider";class nV extends nq{constructor(){super({providerName:nG,wsProtocolName:"graphql-ws",connectUri:"/connect"})}getProviderName(){return nG}subscribe(e,t){return super.subscribe(e,t)}async _prepareSubscriptionPayload({options:e,subscriptionId:t,customUserAgentDetails:r,additionalCustomHeaders:n,libraryConfigHeaders:i}){let{appSyncGraphqlEndpoint:a,authenticationType:o,query:l,variables:c,apiKey:u,region:d}=e,p=JSON.stringify({query:l,variables:c}),h={...await nB({apiKey:u,appSyncGraphqlEndpoint:a,authenticationType:o,payload:p,canonicalUri:"",region:d,additionalCustomHeaders:n}),...i,...n,[na.Mt]:(0,rc.Zm)(r)};return JSON.stringify({id:t,payload:{data:p,extensions:{authorization:{...h}}},type:s.GQL_START})}_handleSubscriptionData(e){this.logger.debug(`subscription message from AWS AppSync RealTime: ${e.data}`);let{id:t="",payload:r,type:n}=JSON.parse(String(e.data)),{observer:i=null,query:a="",variables:o={}}=this.subscriptionObserverMap.get(t)||{};return(this.logger.debug({id:t,observer:i,query:a,variables:o}),n===s.DATA&&r&&r.data)?(i?i.next(r):this.logger.debug(`observer not found for id: ${t}`),[!0,{id:t,type:n,payload:r}]):[!1,{id:t,type:n,payload:r}]}_unsubscribeMessage(e){return{id:e,type:s.GQL_STOP}}_extractConnectionTimeout(e){let{payload:{connectionTimeoutMs:t=3e5}={}}=e;return t}_extractErrorCodeAndType(e){let{payload:{errors:[{errorType:t="",errorCode:r=0}={}]=[]}={}}=e;return{errorCode:r,errorType:t}}}class nz extends ru._{constructor(e){super(e),this.constructor=nz,Object.setPrototypeOf(this,nz.prototype)}}!function(e){e.NoAuthSession="NoAuthSession",e.NoRegion="NoRegion",e.NoCustomEndpoint="NoCustomEndpoint"}(p||(p={}));let nW={[p.NoAuthSession]:{message:"Auth session should not be empty."},[p.NoRegion]:{message:"Missing region."},[p.NoCustomEndpoint]:{message:"Custom endpoint region is present without custom endpoint."}},nY=new rv.k("GraphQLAPI resolveConfig"),nH=e=>{let t=e.getConfig();t.API?.GraphQL||nY.warn("The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().");let{apiKey:r,customEndpoint:n,customEndpointRegion:i,defaultAuthMode:a,endpoint:s,region:o}=t.API?.GraphQL??{};return function(e,t){let{message:r,recoverySuggestion:n}=nW[t];if(!e)throw new nz({name:t,message:r,recoverySuggestion:n})}(!(!n&&i),p.NoCustomEndpoint),{apiKey:r,customEndpoint:n,customEndpointRegion:i,defaultAuthMode:a,endpoint:s,region:o}},nJ=e=>({headers:e.libraryOptions?.API?.GraphQL?.headers,withCredentials:e.libraryOptions?.API?.GraphQL?.withCredentials});function nQ(e){return e.errors&&Array.isArray(e.errors)&&e.errors.forEach(e=>{(e?.originalError?.name?.startsWith("UnauthorizedException")||e.message?.startsWith("Connection failed:")&&e.message?.includes("Permission denied"))&&(e.message="Unauthorized",e.recoverySuggestion="If you're calling an Amplify-generated API, make sure to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')")}),e}let nX={name:"NoApiKey",message:i.NO_API_KEY,recoverySuggestion:'The API request was made with `authMode: "apiKey"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.'},nZ={name:"NoCredentials",message:i.NO_CREDENTIALS,recoverySuggestion:`The API request was made with \`authMode: "iam"\` but no authentication credentials are available.

If you intended to make a request using an authenticated role, review if your user is signed in before making the request.

If you intend to make a request using an unauthenticated role or also known as "guest access", verify if "Auth.Cognito.allowGuestAccess" is set to "true" in the \`Amplify.configure()\` function.`},n0={name:"NoValidAuthTokens",message:i.NO_FEDERATED_JWT,recoverySuggestion:"If you intended to make an authenticated API request, review if the current user is signed in."},n1={name:"NoSignedUser",message:i.NO_CURRENT_USER,recoverySuggestion:"Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in."},n2={name:"NoAuthorizationHeader",message:i.NO_AUTH_TOKEN,recoverySuggestion:'The API request was made with `authMode: "lambda"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.'},n4={name:"NoEndpoint",message:"No GraphQL endpoint configured in `Amplify.configure()`.",recoverySuggestion:"Review if the GraphQL API endpoint is set in the `Amplify.configure()` function."},n3=e=>({data:{},errors:[new tL(e.message,null,null,null,null,e)]});async function n5(e,t,r,n={}){let i={};switch(t){case"apiKey":if(!r)throw new nz(nX);i={"X-Api-Key":r};break;case"iam":if(void 0===(await e.Auth.fetchAuthSession()).credentials)throw new nz(nZ);break;case"oidc":case"userPool":{let t;try{t=(await e.Auth.fetchAuthSession()).tokens?.accessToken.toString()}catch(e){throw new nz({...n1,underlyingError:e})}if(!t)throw new nz(n0);i={Authorization:t};break}case"lambda":if("object"==typeof n&&!n.Authorization)throw new nz(n2);i={Authorization:n.Authorization}}return i}let n6=e=>"function"!=typeof e;class n8{constructor(){this.appSyncRealTime=new Map,this._api={post:nr,cancelREST:nn,isCancelErrorREST:rf,updateRequestToBeCancellable:ni}}getModuleName(){return"InternalGraphQLAPI"}getGraphqlOperationType(e){let[{operation:t}]=t0(e).definitions;return t}graphql(e,{query:t,variables:r={},authMode:n,authToken:i,endpoint:a,apiKey:s},o,l){let c="string"==typeof t?t0(t):t0(t6(t)),[u={}]=c.definitions.filter(e=>"OperationDefinition"===e.kind),{operation:d}=u,p=o||{};switch(d){case"query":case"mutation":{let t;let o=new AbortController;return t=n6(e)?this._graphql(e,{query:c,variables:r,authMode:n,apiKey:s,endpoint:a},p,o,l,i):e(async e=>await this._graphql(e,{query:c,variables:r,authMode:n,apiKey:s,endpoint:a},p,o,l,i)),this._api.updateRequestToBeCancellable(t,o),t}case"subscription":return this._graphqlSubscribe(e,{query:c,variables:r,authMode:n,apiKey:s,endpoint:a},p,l,i);default:throw Error(`invalid operation type: ${d}`)}}async _graphql(e,{query:t,variables:r,authMode:n,endpoint:i,apiKey:a},s={},o,l,c){var u;let d,p,h;let{apiKey:m,region:f,endpoint:g,customEndpoint:x,customEndpointRegion:b,defaultAuthMode:y}=nH(e),v=n||y||"iam",N="identityPool"===v?"iam":v,{headers:k,withCredentials:S}=nJ(e);if("function"==typeof s){let e={method:"POST",url:new rl.a(i||x||g||"").toString(),queryString:t6(t)};d=await s(e)}else d=s;c&&(d={...d,Authorization:c});let E=await n5(e,N,a??m,d),w={...!x&&E,...x&&(b?E:{})||{},...k&&await k({query:t6(t),variables:r}),...d,...!x&&{"x-amz-user-agent":(0,rc.Zm)(l)}},T={query:t6(t),variables:r||null};p=x&&!b||"oidc"!==N&&"userPool"!==N&&"iam"!==N&&"lambda"!==N?void 0:{service:b?"execute-api":"appsync",region:b||f};let j=i||x||g;if(!j)throw n3(new nz(n4));try{let{body:t}=await this._api.post(e,{url:new rl.a(j),options:{headers:w,body:T,signingServiceInfo:p,withCredentials:S},abortController:o});h=await t.json()}catch(e){if(this.isCancelError(e))throw e;h=n3(e)}if((u=h)&&Array.isArray(u.errors)&&u.errors.length>0)throw nQ(h);return h}isCancelError(e){return this._api.isCancelErrorREST(e)}cancel(e,t){return this._api.cancelREST(e,t)}_graphqlSubscribe(e,{query:t,variables:r,authMode:n,apiKey:i,endpoint:a},s={},o,l){let c=nH(e),u=n||c?.defaultAuthMode||"iam",{headers:d}=nJ(e),p=a??c?.endpoint,h=p??"none",m=this.appSyncRealTime.get(h)??new nV;return this.appSyncRealTime.set(h,m),m.subscribe({query:t6(t),variables:r,appSyncGraphqlEndpoint:p,region:c?.region,authenticationType:"identityPool"===u?"iam":u,apiKey:i??c?.apiKey,additionalHeaders:s,authToken:l,libraryConfigHeaders:d},o).pipe(function e(t){return N(function(r,n){var i,a,s=null,o=!1;s=r.subscribe(new G(n,void 0,void 0,function(i){a=rs(t(i,e(t)(r))),s?(s.unsubscribe(),s=null,a.subscribe(n)):o=!0},void 0)),o&&(s.unsubscribe(),s=null,a.subscribe(n))})}(e=>{if(e.errors)throw nQ(e);throw e}))}}new n8;class n7 extends n8{getModuleName(){return"GraphQLAPI"}graphql(e,t,r){let n={category:tb.WD.API,action:tb.gq.GraphQl};if(ef in t){let{[ef]:i,...a}=t;return super.graphql(e,a,r,{...n,...i})}return super.graphql(e,t,r,{...n})}isCancelError(e){return super.isCancelError(e)}cancel(e,t){return super.cancel(e,t)}}let n9=new n7;function ie(e,t){let r=tx(this),n=r.endpoint,i=r.authMode,a=r.apiKey;if(e.authMode=e.authMode||i,e.apiKey=e.apiKey??a,e.authToken=e.authToken||r.authToken,n&&"apiKey"===e.authMode&&!e.apiKey)throw Error("graphql() requires an explicit `apiKey` for a custom `endpoint` when `authMode = 'apiKey'`.");let s=t||r.headers;return n9.graphql(r.amplify,{...e,endpoint:n},s)}function it(e,t){return n9.cancel(e,t)}function ir(e){return n9.isCancelError(e)}let ii=e=>{y.Xb.listen("core",t=>{if("configure"!==t.payload.event)return;let r=t.payload.data.API?.GraphQL;void 0!==r&&tu(e,r,tx)})},ia=new Proxy({},{get(){throw Error("Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.")}});var is=r(1430);function io(e){return function(e){let t={[td]:e.amplify,[tp]:e.authMode,[th]:e.authToken,[tm]:"apiKey"in e?e.apiKey:void 0,[tg]:"endpoint"in e?e.endpoint:void 0,[tf]:e.headers,graphql:ie,cancel:it,isCancelError:ir,models:ia,enums:ia,queries:ia,mutations:ia,subscriptions:ia},r=e.amplify.getConfig().API?.GraphQL;if(t[tg]){if(!t[tp])throw Error("generateClient() requires an explicit `authMode` when `endpoint` is provided.");if("apiKey"===t[tp]&&!t[tm])throw Error("generateClient() requires an explicit `apiKey` when `endpoint` is provided and `authMode = 'apiKey'`.")}return t[tg]||(void 0!==r?tu(t,r,tx):ii(t)),t}({...e||{},amplify:is.d})}function il({value:e,onChange:t,min:r,placeholder:n="Select date",required:i=!1,className:a=""}){let[s,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(new Date),u=new Date(l.getFullYear(),l.getMonth()+1,0).getDate(),d=new Date(l.getFullYear(),l.getMonth(),1).getDay(),p=r?new Date(r+"T00:00:00"):null,f=e?new Date(e+"T00:00:00"):null,g=e=>!!p&&new Date(l.getFullYear(),l.getMonth(),e)<p,x=e=>{if(g(e))return;let r=l.getFullYear(),n=String(l.getMonth()+1).padStart(2,"0"),i=String(e).padStart(2,"0");t(`${r}-${n}-${i}`),o(!1)},b=e=>{let t=new Date;return e===t.getDate()&&l.getMonth()===t.getMonth()&&l.getFullYear()===t.getFullYear()},y=e=>!!f&&e===f.getDate()&&l.getMonth()===f.getMonth()&&l.getFullYear()===f.getFullYear();return(0,h.jsxs)("div",{className:"date-picker-container relative",children:[h.jsx("input",{type:"text",value:e?new Date(e+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",onClick:()=>o(!s),readOnly:!0,placeholder:n,required:i,className:`cursor-pointer ${a}`}),s&&(0,h.jsxs)("div",{className:"absolute z-50 mt-1 bg-white border border-gray-200 rounded-lg shadow-xl p-4 min-w-[320px]",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("button",{type:"button",onClick:()=>{c(new Date(l.getFullYear(),l.getMonth()-1))},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,h.jsxs)("h3",{className:"font-semibold text-gray-900",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][l.getMonth()]," ",l.getFullYear()]}),h.jsx("button",{type:"button",onClick:()=>{c(new Date(l.getFullYear(),l.getMonth()+1))},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),h.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(e=>h.jsx("div",{className:"text-center text-xs font-semibold text-gray-600 py-1",children:e},e))}),(0,h.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:d}).map((e,t)=>h.jsx("div",{className:"p-2"},`empty-${t}`)),Array.from({length:u}).map((e,t)=>{let r=t+1,n=g(r),i=y(r),a=b(r);return h.jsx("button",{type:"button",onClick:()=>x(r),disabled:n,className:`
                    p-2 rounded-lg text-sm font-medium transition-all
                    ${n?"text-gray-300 bg-gray-50 cursor-not-allowed line-through":"hover:bg-[#FF5A5F] hover:text-white cursor-pointer"}
                    ${i?"bg-[#FF5A5F] text-white":""}
                    ${!a||i||n?"":"border-2 border-[#FF5A5F] text-[#FF5A5F] font-bold"}
                    ${n||i||a?"":"text-gray-700"}
                  `,children:r},r)})]}),(0,h.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-200 flex items-center justify-center gap-4 text-xs",children:[(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-[#FF5A5F] rounded"}),h.jsx("span",{className:"text-gray-600",children:"Today"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-4 h-4 bg-[#FF5A5F] rounded"}),h.jsx("span",{className:"text-gray-600",children:"Selected"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-4 h-4 bg-gray-50 rounded line-through"}),h.jsx("span",{className:"text-gray-600",children:"Unavailable"})]})]})]})]})}function ic({onTripCreated:e}){let{user:t}=(0,f.Z)(e=>[e.user]),[r,n]=(0,m.useState)(!1),[i,a]=(0,m.useState)({tripName:"",destination:"",startDate:"",endDate:"",groupSize:2,departure:""}),s=new Date().toISOString().split("T")[0],o=async r=>{if(r.preventDefault(),!t){n(!0);return}try{let t=io(),{data:r}=await t.models.Trip.create({name:i.tripName||`Trip to ${i.destination}`,destinationCity:i.destination,departureCity:i.departure,startDate:i.startDate,endDate:i.endDate,groupSize:i.groupSize,shareCode:l()});r&&e(r)}catch(e){console.error("Error creating trip:",e)}},l=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let r=0;r<8;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t};return(0,h.jsxs)(h.Fragment,{children:[h.jsx("div",{className:"relative bg-cover bg-center min-h-[600px] flex items-center justify-center",style:{backgroundImage:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,h.jsxs)("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Plan Your Perfect Trip Together"}),h.jsx("p",{className:"text-xl text-white/90 mb-12",children:"Collaborate with friends, discover events, and create unforgettable memories"}),(0,h.jsxs)("form",{onSubmit:o,className:"bg-white rounded-2xl shadow-2xl p-8 max-w-3xl mx-auto",children:[(0,h.jsxs)("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Name"}),h.jsx("input",{type:"text",value:i.tripName,onChange:e=>a({...i,tripName:e.target.value}),placeholder:"e.g. The Boys Out, Girls Weekend, Family Vacation",className:"input-field"})]}),(0,h.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Where to?"}),h.jsx("input",{type:"text",value:i.destination,onChange:e=>a({...i,destination:e.target.value}),placeholder:"Enter destination city",className:"input-field",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From where?"}),h.jsx("input",{type:"text",value:i.departure,onChange:e=>a({...i,departure:e.target.value}),placeholder:"Enter departure city",className:"input-field"})]})]}),(0,h.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),h.jsx(il,{value:i.startDate,onChange:e=>{a({...i,startDate:e,endDate:i.endDate&&i.endDate<e?"":i.endDate})},min:s,placeholder:"Select start date",className:"input-field",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),h.jsx(il,{value:i.endDate,onChange:e=>a({...i,endDate:e}),min:i.startDate||s,placeholder:"Select end date",className:"input-field",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Size"}),h.jsx("select",{value:i.groupSize,onChange:e=>a({...i,groupSize:parseInt(e.target.value)}),className:"input-field",children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,h.jsxs)("option",{value:e,children:[e," ",1===e?"person":"people"]},e))})]})]}),h.jsx("button",{type:"submit",className:"btn-primary w-full text-lg py-4",children:"Start Planning Your Trip"})]})]})}),r&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:[h.jsx("button",{onClick:()=>n(!1),className:"float-right text-gray-500 hover:text-gray-700",children:""}),h.jsx(b._,{children:({signOut:e,user:r})=>(r&&!t&&setTimeout(()=>{n(!1),o(new Event("submit"))},100),r?(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsxs)("p",{className:"mb-4",children:["Welcome ",r.username,"!"]}),h.jsx("button",{onClick:()=>{n(!1),o(new Event("submit"))},className:"btn-primary w-full",children:"Continue"})]}):h.jsx(h.Fragment,{}))})]})})]})}r(8438);var iu=r(7158);function id({compact:e=!1,maxItems:t=20,filter:r}){let{activities:n,clearActivities:i,exportActivities:a}=(0,iu.x)(),[s,o]=(0,m.useState)([]),[l,c]=(0,m.useState)(!e),[u,d]=(0,m.useState)("all"),[p,f]=(0,m.useState)(!1),g=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/1e3),r=Math.floor(t/60),n=Math.floor(r/60),i=Math.floor(n/24);return t<60?"just now":r<60?`${r}m ago`:n<24?`${n}h ago`:i<7?`${i}d ago`:e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})};return e?(0,h.jsxs)("div",{className:"relative transform hover:scale-[1.02] transition-transform",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl transform translate-y-1"}),h.jsx("div",{className:"relative bg-gradient-to-b from-gray-600 via-gray-700 to-gray-800 rounded-2xl p-1 shadow-2xl",children:h.jsx("div",{className:"bg-gradient-to-b from-gray-800 to-black rounded-2xl p-0.5",children:(0,h.jsxs)("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-xl p-5 shadow-inner min-h-[160px]",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent rounded-xl pointer-events-none"}),h.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-yellow-400 rounded-full shadow-lg shadow-yellow-400/50 animate-pulse"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"text-white font-bold text-sm",children:"Activity Feed"}),(0,h.jsxs)("p",{className:"text-white/60 text-xs",children:[n.length," events"]})]})]}),h.jsx("button",{onClick:()=>c(!l),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:h.jsx("svg",{className:`w-4 h-4 text-white transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!l&&(0,h.jsxs)("div",{className:"space-y-1",children:[s.slice(0,3).map(e=>(0,h.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[h.jsx("span",{children:e.icon}),h.jsx("span",{className:"text-white/80 truncate flex-1",children:e.action}),h.jsx("span",{className:"text-white/40",children:g(e.timestamp)})]},e.id)),n.length>3&&(0,h.jsxs)("p",{className:"text-white/40 text-xs text-center pt-1",children:["+",n.length-3," more"]})]}),l&&(0,h.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,h.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[h.jsx("button",{onClick:()=>d("all"),className:`px-2 py-1 rounded-full text-xs font-semibold transition-colors ${"all"===u?"bg-white text-indigo-900":"bg-white/10 text-white hover:bg-white/20"}`,children:"All"}),["trip","flight","event","place"].map(e=>h.jsx("button",{onClick:()=>d(e),className:`px-2 py-1 rounded-full text-xs font-semibold transition-colors ${u===e?"bg-white text-indigo-900":"bg-white/10 text-white hover:bg-white/20"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),h.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:0===s.length?h.jsx("p",{className:"text-white/40 text-xs text-center py-4",children:"No activities yet"}):s.map(e=>h.jsx("div",{className:"bg-black/30 rounded-lg p-2",children:(0,h.jsxs)("div",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-lg mt-0.5",children:e.icon}),(0,h.jsxs)("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-white text-xs font-semibold",children:e.action}),e.details&&h.jsx("p",{className:"text-white/60 text-xs mt-0.5 truncate",children:"string"==typeof e.details?e.details:JSON.stringify(e.details)}),h.jsx("p",{className:"text-white/40 text-xs mt-1",children:g(e.timestamp)})]})]})},e.id))}),(0,h.jsxs)("div",{className:"flex gap-2 pt-2",children:[h.jsx("button",{onClick:()=>f(!0),className:"flex-1 px-3 py-1.5 bg-white/10 text-white rounded-lg text-xs font-semibold hover:bg-white/20 transition-colors",children:"Export"}),h.jsx("button",{onClick:i,className:"flex-1 px-3 py-1.5 bg-red-500/20 text-red-300 rounded-lg text-xs font-semibold hover:bg-red-500/30 transition-colors",children:"Clear"})]})]})]})]})})})]}):(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-3xl",children:"\uD83D\uDCCA"}),(0,h.jsxs)("div",{children:[h.jsx("h2",{className:"text-xl font-bold",children:"Activity Feed"}),(0,h.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["Tracking ",n.length," events"]})]})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Export Log"}),h.jsx("button",{onClick:i,className:"px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Clear All"})]})]}),(0,h.jsxs)("div",{className:"flex gap-2 mb-4",children:[h.jsx("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${"all"===u?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"All"}),["trip","flight","event","place","budget"].map(e=>(0,h.jsxs)("button",{onClick:()=>d(e),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${u===e?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.charAt(0).toUpperCase()+e.slice(1),"s"]},e))]}),h.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===s.length?(0,h.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[h.jsx("span",{className:"text-4xl mb-4 block",children:"\uD83D\uDCDD"}),h.jsx("p",{children:"No activities to display"}),h.jsx("p",{className:"text-sm mt-2",children:"Activities will appear here as you use the app"})]}):s.map(e=>(0,h.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[h.jsx("span",{className:"text-2xl",children:e.icon}),(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{children:[h.jsx("p",{className:`font-semibold ${e.color}`,children:e.action}),e.details&&h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"string"==typeof e.details?e.details:JSON.stringify(e.details,null,2)})]}),h.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:g(e.timestamp)})]}),(0,h.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[h.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded-full",children:e.category}),h.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded-full",children:e.type}),e.userName&&(0,h.jsxs)("span",{children:["by ",e.userName]})]})]})]},e.id))}),p&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[h.jsx("h3",{className:"text-lg font-bold mb-4",children:"Export Activity Log"}),(0,h.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Export all ",n.length," activities as a JSON file for backup or analysis."]}),(0,h.jsxs)("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{let e=new Blob([a()],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`activity-log-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(t),f(!1)},className:"flex-1 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors",children:"Download JSON"}),h.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})]})}function ip({tripData:e,onTripUpdate:t,flightCount:r=0,eventCount:n=0,placeCount:i=0,totalBudget:a=0}){let{addActivity:s}=(0,iu.x)(),[o,l]=(0,m.useState)(null),[c,u]=(0,m.useState)(!1),[d,p]=(0,m.useState)({name:e?.name||"",destinationCity:e?.destinationCity||"",departureCity:e?.departureCity||"",startDate:e?.startDate||"",endDate:e?.endDate||"",groupSize:e?.groupSize||2,description:e?.description||""}),f=e=>e?new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}):"",g=async r=>{try{let n=io(),i={id:e.id};"dates"===r?(i.startDate=d.startDate,i.endDate=d.endDate):"destination"===r?(i.destinationCity=d.destinationCity,i.departureCity=d.departureCity):i[r]=d[r];let{data:a}=await n.models.Trip.update(i);s({type:"update",category:"trip",action:`Updated trip ${r}`,details:i}),t&&t(a),l(null)}catch(e){console.error("Error updating trip:",e)}},x=()=>{p({name:e?.name||"",destinationCity:e?.destinationCity||"",departureCity:e?.departureCity||"",startDate:e?.startDate||"",endDate:e?.endDate||"",groupSize:e?.groupSize||2,description:e?.description||""}),l(null)},b=[{id:"destination",label:"Set destination",completed:!!e?.destinationCity,points:10},{id:"dates",label:"Choose travel dates",completed:!!e?.startDate&&!!e?.endDate,points:10},{id:"group",label:"Set group size",completed:(e?.groupSize||0)>0,points:5},{id:"flight",label:`Add at least one flight (${r} added)`,completed:r>0,points:20},{id:"accommodation",label:"Book accommodation",completed:!1,points:20},{id:"activities",label:`Plan 3+ activities (${n} planned)`,completed:n>=3,points:15},{id:"places",label:`Save 5+ places to visit (${i} saved)`,completed:i>=5,points:10},{id:"budget",label:`Set trip budget ($${a} allocated)`,completed:a>0,points:10}],y=Math.round(b.filter(e=>e.completed).reduce((e,t)=>e+t.points,0)/b.reduce((e,t)=>e+t.points,0)*100);return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,h.jsxs)("div",{className:"p-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-600",children:"Trip Planning Progress"}),(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)("span",{className:"text-sm font-bold text-purple-600",children:[y,"% Complete"]}),h.jsx("button",{onClick:()=>u(!c),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:h.jsx("div",{className:"bg-gradient-to-r from-red-500 to-purple-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${y}%`}})})]}),c&&(0,h.jsxs)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[(0,h.jsxs)("div",{className:"space-y-3",children:[h.jsx("p",{className:"text-xs text-gray-500 uppercase font-semibold mb-3",children:"Complete these steps to plan your perfect trip:"}),b.map(e=>(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[e.completed?h.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center",children:h.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}):h.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"}),h.jsx("span",{className:`text-sm ${e.completed?"text-gray-700 line-through":"text-gray-600"}`,children:e.label})]}),(0,h.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded-full ${e.completed?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:["+",e.points,"%"]})]},e.id))]}),y<100&&h.jsx("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:(0,h.jsxs)("p",{className:"text-sm text-purple-800",children:[h.jsx("span",{className:"font-semibold",children:"Next step:"})," ",b.find(e=>!e.completed)?.label||"Complete all tasks"]})}),100===y&&h.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:(0,h.jsxs)("p",{className:"text-sm text-green-800 flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:"\uD83C\uDF89"}),h.jsx("span",{className:"font-semibold",children:"Awesome! Your trip is fully planned!"})]})})]})]}),h.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-red-50 rounded-2xl p-6 border border-purple-100",children:(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{className:"flex-1",children:["name"===o?(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"text",value:d.name,onChange:e=>p({...d,name:e.target.value}),className:"text-2xl font-bold bg-white px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Trip name"}),h.jsx("button",{onClick:()=>g("name"),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Save"}),h.jsx("button",{onClick:x,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]}):(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e?.name||"Untitled Trip"}),h.jsx("button",{onClick:()=>l("name"),className:"p-2 hover:bg-white/50 rounded-lg transition-colors",children:h.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),(0,h.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[(0,h.jsxs)("span",{className:"flex items-center gap-1",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Created ",new Date(e?.createdAt||Date.now()).toLocaleDateString()]}),(0,h.jsxs)("span",{className:"flex items-center gap-1",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),e?.shareCode]})]})]}),(0,h.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(e?.shareCode||""),className:"px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Share Trip"]})]})}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,h.jsxs)("div",{className:"relative transform hover:scale-[1.02] transition-transform",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl transform translate-y-1"}),h.jsx("div",{className:"relative bg-gradient-to-b from-gray-600 via-gray-700 to-gray-800 rounded-2xl p-1 shadow-2xl",children:h.jsx("div",{className:"bg-gradient-to-b from-gray-800 to-black rounded-2xl p-0.5",children:(0,h.jsxs)("div",{className:"bg-gradient-to-br from-purple-900 via-pink-900 to-red-900 rounded-xl p-4 shadow-inner",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent rounded-xl pointer-events-none"}),h.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-400 rounded-full shadow-lg shadow-green-400/50 animate-pulse"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Destination"}),!o&&h.jsx("button",{onClick:()=>l("destination"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),"destination"===o?(0,h.jsxs)("div",{className:"space-y-3",children:[h.jsx("input",{type:"text",value:d.destinationCity,onChange:e=>p({...d,destinationCity:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Destination city"}),h.jsx("input",{type:"text",value:d.departureCity,onChange:e=>p({...d,departureCity:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Departure city"}),(0,h.jsxs)("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>g("destination"),className:"flex-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Save"}),h.jsx("button",{onClick:x,className:"flex-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Cancel"})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,h.jsxs)("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{className:"text-lg font-bold text-gray-900",children:e?.destinationCity||"Not set"})]}),e?.departureCity&&(0,h.jsxs)("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})}),"from ",e?.departureCity]})]})]})]})})})]}),(0,h.jsxs)("div",{className:"relative transform hover:scale-[1.02] transition-transform",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl transform translate-y-1"}),h.jsx("div",{className:"relative bg-gradient-to-b from-gray-600 via-gray-700 to-gray-800 rounded-2xl p-1 shadow-2xl",children:h.jsx("div",{className:"bg-gradient-to-b from-gray-800 to-black rounded-2xl p-0.5",children:(0,h.jsxs)("div",{className:"bg-gradient-to-br from-blue-900 to-cyan-900 rounded-xl p-4 shadow-inner",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent rounded-xl pointer-events-none"}),h.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-blue-400 rounded-full shadow-lg shadow-blue-400/50 animate-pulse"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Travel Dates"}),!o&&h.jsx("button",{onClick:()=>l("dates"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),"dates"===o?(0,h.jsxs)("div",{className:"space-y-3",children:[h.jsx("input",{type:"date",value:d.startDate,onChange:e=>p({...d,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),h.jsx("input",{type:"date",value:d.endDate,onChange:e=>p({...d,endDate:e.target.value}),min:d.startDate,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,h.jsxs)("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>g("dates"),className:"flex-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Save"}),h.jsx("button",{onClick:x,className:"flex-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Cancel"})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,h.jsxs)("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:f(e?.startDate).split(",")[0]}),h.jsx("p",{className:"text-xs text-gray-500",children:f(e?.startDate).split(",").slice(1).join(",")})]}),h.jsx("svg",{className:"w-4 h-4 text-gray-400 mx-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),(0,h.jsxs)("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:f(e?.endDate).split(",")[0]}),h.jsx("p",{className:"text-xs text-gray-500",children:f(e?.endDate).split(",").slice(1).join(",")})]})]}),(0,h.jsxs)("p",{className:"text-xs font-semibold text-purple-600 bg-purple-50 rounded-full px-3 py-1 inline-block mt-2",children:[((e,t)=>{if(!e||!t)return 0;let r=new Date(e);return Math.ceil(Math.abs(new Date(t).getTime()-r.getTime())/864e5)})(e?.startDate,e?.endDate)," nights"]})]})]})]})})})]}),(0,h.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-lg transition-all hover:scale-[1.02]",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Travelers"}),!o&&h.jsx("button",{onClick:()=>l("groupSize"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:h.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),"groupSize"===o?(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>p({...d,groupSize:Math.max(1,d.groupSize-1)}),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-colors",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),h.jsx("input",{type:"number",value:d.groupSize,onChange:e=>p({...d,groupSize:parseInt(e.target.value)||1}),min:"1",max:"20",className:"flex-1 px-3 py-2 border border-purple-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-center text-lg font-semibold"}),h.jsx("button",{onClick:()=>p({...d,groupSize:Math.min(20,d.groupSize+1)}),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-colors",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>g("groupSize"),className:"flex-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Save"}),h.jsx("button",{onClick:x,className:"flex-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Cancel"})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)("div",{className:"flex -space-x-2",children:[[...Array(Math.min(e?.groupSize||1,4))].map((e,t)=>h.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-red-400 to-purple-500 border-2 border-white flex items-center justify-center text-white font-semibold text-xs",children:0===t?"You":t+1},t)),(e?.groupSize||1)>4&&(0,h.jsxs)("div",{className:"w-8 h-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-gray-600 font-semibold text-xs",children:["+",(e?.groupSize||1)-4]})]}),(0,h.jsxs)("div",{children:[h.jsx("p",{className:"text-xl font-bold text-gray-900",children:e?.groupSize||1}),h.jsx("p",{className:"text-[10px] text-gray-500",children:e?.groupSize===1?"Solo":"People"})]})]}),h.jsx("button",{onClick:()=>l("groupSize"),className:"mt-2 text-xs text-purple-600 hover:text-purple-700 font-medium",children:"Change "})]})]}),(0,h.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-lg transition-all hover:scale-[1.02]",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Share Code"})}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[h.jsx("p",{className:"text-xl font-mono font-bold text-purple-600 mb-1",children:e?.shareCode}),h.jsx("p",{className:"text-[10px] text-gray-500",children:"Share with friends"})]}),h.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e?.shareCode||"")},className:"p-2 bg-purple-50 text-purple-600 rounded-lg hover:bg-purple-100 transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]}),h.jsx("div",{className:"mt-5",children:h.jsx(id,{compact:!0,maxItems:10})})]})}let ih={AA:"American Airlines",DL:"Delta Air Lines",UA:"United Airlines",WN:"Southwest Airlines",B6:"JetBlue Airways",AS:"Alaska Airlines",NK:"Spirit Airlines",F9:"Frontier Airlines",G4:"Allegiant Air",SY:"Sun Country Airlines",BA:"British Airways",AF:"Air France",LH:"Lufthansa",EK:"Emirates",QR:"Qatar Airways",SQ:"Singapore Airlines",AC:"Air Canada",QF:"Qantas",NH:"All Nippon Airways",JL:"Japan Airlines",KE:"Korean Air",CX:"Cathay Pacific",TK:"Turkish Airlines",EY:"Etihad Airways",LX:"SWISS",KL:"KLM",IB:"Iberia",AZ:"Alitalia",OS:"Austrian Airlines",SK:"SAS",AY:"Finnair",TP:"TAP Air Portugal",LO:"LOT Polish Airlines"};async function im(e,t){let r=function(e){let t=e.replace(/\s+/g,"").toUpperCase().match(/^([A-Z]{2,3})(\d{1,4})$/);if(t){let[e,r,n]=t;return{airline:ih[r]||r,number:`${r}${n}`}}return null}(e);if(!r)return null;let n={AA3421:{departureAirport:"Dallas/Fort Worth (DFW)",arrivalAirport:"Denver (DEN)",departureTime:"10:30",arrivalTime:"11:45",aircraft:"Boeing 737-800"},UA1234:{departureAirport:"San Francisco (SFO)",arrivalAirport:"Denver (DEN)",departureTime:"08:00",arrivalTime:"11:30",aircraft:"Airbus A320"},DL456:{departureAirport:"Atlanta (ATL)",arrivalAirport:"Los Angeles (LAX)",departureTime:"13:15",arrivalTime:"14:45",aircraft:"Boeing 757-200"},WN789:{departureAirport:"Chicago Midway (MDW)",arrivalAirport:"Las Vegas (LAS)",departureTime:"15:20",arrivalTime:"17:05",aircraft:"Boeing 737-700"}}[r.number];return n?{airline:r.airline,flightNumber:r.number,...n}:{airline:r.airline,flightNumber:r.number}}function ig({tripId:e,tripData:t,onFlightsUpdate:r}){let{addActivity:n}=(0,iu.x)(),[i,a]=(0,m.useState)([]),[s,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(null),[u,d]=(0,m.useState)(null),[p,f]=(0,m.useState)([]),[g,x]=(0,m.useState)(!0),[b,y]=(0,m.useState)(!1),[v,N]=(0,m.useState)({airline:"",flightNumber:"",arrivalDateTime:"",departureAirport:"",arrivalAirport:"",travelerName:"",confirmationNumber:"",seatNumber:"",terminal:"",gate:"",notes:"",isGroupFlight:!1}),[k,S]=(0,m.useState)({name:"",email:"",seatNumber:""}),E=async()=>{if(v.flightNumber){y(!0);try{let e=await im(v.flightNumber,v.arrivalDateTime||new Date().toISOString().split("T")[0]);e&&N(t=>({...t,airline:e.airline||t.airline,departureAirport:e.departureAirport?.match(/\(([A-Z]{3})\)/)?.[1]||t.departureAirport,arrivalAirport:e.arrivalAirport?.match(/\(([A-Z]{3})\)/)?.[1]||t.arrivalAirport}))}catch(e){console.error("Error looking up flight:",e)}finally{y(!1)}}},w=async()=>{try{if(io(),!v.airline||!v.arrivalDateTime||!v.departureAirport||!v.arrivalAirport||!v.travelerName){alert("Please fill in all required fields");return}let t={...v,tripId:e,userId:"current-user-id",departureAirport:v.departureAirport.toUpperCase(),arrivalAirport:v.arrivalAirport.toUpperCase(),flightNumber:v.flightNumber?.toUpperCase(),status:"scheduled"};if(l){let e={...t,id:l};a(t=>t.map(t=>t.id===l?e:t)),n({type:"update",category:"flight",action:`Updated flight ${t.flightNumber||t.airline}`,details:{route:`${t.departureAirport}  ${t.arrivalAirport}`}})}else{let e={...t,id:`flight_${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};a(t=>[...t,e]),n({type:"create",category:"flight",action:`Added flight ${t.flightNumber||t.airline}`,details:{route:`${t.departureAirport}  ${t.arrivalAirport}`}})}N({airline:"",flightNumber:"",arrivalDateTime:"",departureAirport:"",arrivalAirport:"",travelerName:"",confirmationNumber:"",seatNumber:"",terminal:"",gate:"",notes:"",isGroupFlight:!1}),o(!1),c(null),r&&r(i)}catch(e){console.error("Error saving flight:",e)}},T=async e=>{try{let t=i.find(t=>t.id===e);a(t=>t.filter(t=>t.id!==e)),t&&n({type:"delete",category:"flight",action:`Deleted flight ${t.flightNumber||t.airline}`,details:{route:`${t.departureAirport}  ${t.arrivalAirport}`}}),r&&r(i.filter(t=>t.id!==e))}catch(e){console.error("Error deleting flight:",e)}},j=e=>{N({airline:e.airline,flightNumber:e.flightNumber||"",arrivalDateTime:e.arrivalDateTime,departureAirport:e.departureAirport,arrivalAirport:e.arrivalAirport,travelerName:e.travelerName,confirmationNumber:e.confirmationNumber||"",seatNumber:e.seatNumber||"",terminal:e.terminal||"",gate:e.gate||"",notes:e.notes||"",isGroupFlight:e.isGroupFlight||!1}),c(e.id),o(!0)},A=(e,t)=>{let r={...e,guestUserIds:[...e.guestUserIds||[],t.id]};a(t=>t.map(t=>t.id===e.id?r:t)),d(null)},C=e=>{let t=new Date(e);return{date:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),time:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}};return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[h.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:" Flight Management"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Track and manage all flights for your trip"})]}),h.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:scale-105 transition-transform shadow-lg",children:"+ Add Flight"})]}),s&&(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-xl border border-gray-200 dark:border-gray-700",children:[(0,h.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[h.jsx("span",{children:""}),l?"Edit Flight":"Add New Flight"]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Flight Number (Optional)"}),(0,h.jsxs)("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",placeholder:"e.g., AA1234",value:v.flightNumber,onChange:e=>N({...v,flightNumber:e.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"}),h.jsx("button",{onClick:E,disabled:!v.flightNumber||b,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"\uD83D\uDD0D Searching...":"\uD83D\uDD0D Lookup"})]})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Airline *"}),h.jsx("input",{type:"text",placeholder:"e.g., American Airlines",value:v.airline,onChange:e=>N({...v,airline:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Traveler Name *"}),(0,h.jsxs)("select",{value:v.travelerName,onChange:e=>N({...v,travelerName:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select traveler"}),p.map(e=>h.jsx("option",{value:e.name,children:e.name},e.id))]})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Departure Airport (IATA) *"}),h.jsx("input",{type:"text",placeholder:"e.g., JFK",value:v.departureAirport,onChange:e=>N({...v,departureAirport:e.target.value.toUpperCase()}),maxLength:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500 uppercase",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Arrival Airport (IATA) *"}),h.jsx("input",{type:"text",placeholder:"e.g., LAX",value:v.arrivalAirport,onChange:e=>N({...v,arrivalAirport:e.target.value.toUpperCase()}),maxLength:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500 uppercase",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Arrival Date & Time *"}),h.jsx("input",{type:"datetime-local",value:v.arrivalDateTime,onChange:e=>N({...v,arrivalDateTime:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confirmation Number"}),h.jsx("input",{type:"text",placeholder:"e.g., ABC123",value:v.confirmationNumber,onChange:e=>N({...v,confirmationNumber:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Terminal"}),h.jsx("input",{type:"text",placeholder:"e.g., Terminal 2",value:v.terminal,onChange:e=>N({...v,terminal:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gate"}),h.jsx("input",{type:"text",placeholder:"e.g., B14",value:v.gate,onChange:e=>N({...v,gate:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Seat Number"}),h.jsx("input",{type:"text",placeholder:"e.g., 12A",value:v.seatNumber,onChange:e=>N({...v,seatNumber:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",id:"groupFlight",checked:v.isGroupFlight,onChange:e=>N({...v,isGroupFlight:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),h.jsx("label",{htmlFor:"groupFlight",className:"text-sm font-medium",children:"Multiple travelers on this flight"})]}),(0,h.jsxs)("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),h.jsx("textarea",{placeholder:"Additional information...",value:v.notes,onChange:e=>N({...v,notes:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]})]}),(0,h.jsxs)("div",{className:"flex gap-2 mt-6",children:[h.jsx("button",{onClick:w,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:scale-105 transition-transform",children:l?"Update Flight":"Save Flight"}),h.jsx("button",{onClick:()=>{o(!1),c(null),N({airline:"",flightNumber:"",arrivalDateTime:"",departureAirport:"",arrivalAirport:"",travelerName:"",confirmationNumber:"",seatNumber:"",terminal:"",gate:"",notes:"",isGroupFlight:!1})},className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}),g?(0,h.jsxs)("div",{className:"text-center py-12",children:[h.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),h.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading flights..."})]}):0===i.length?(0,h.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-12 text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Flights Yet"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Add your first flight to get started"}),h.jsx("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:scale-105 transition-transform shadow-lg",children:"Add Your First Flight"})]}):h.jsx("div",{className:"space-y-4",children:i.map(e=>{let t=C(e.arrivalDateTime);return h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-shadow",children:(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("span",{className:"text-2xl",children:""}),(0,h.jsxs)("div",{children:[h.jsx("h4",{className:"text-lg font-bold",children:e.flightNumber||`${e.airline} Flight`}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.airline})]}),e.isGroupFlight&&h.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-xs font-semibold",children:"Group Flight"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,h.jsxs)("div",{className:"text-center",children:[h.jsx("p",{className:"text-2xl font-bold",children:e.departureAirport}),h.jsx("p",{className:"text-xs text-gray-500",children:"Departure"})]}),(0,h.jsxs)("div",{className:"flex-1 flex items-center",children:[h.jsx("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-blue-400 to-purple-400"}),h.jsx("span",{className:"mx-2",children:""}),h.jsx("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-purple-400 to-pink-400"})]}),(0,h.jsxs)("div",{className:"text-center",children:[h.jsx("p",{className:"text-2xl font-bold",children:e.arrivalAirport}),h.jsx("p",{className:"text-xs text-gray-500",children:"Arrival"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-sm",children:[h.jsx("span",{children:"\uD83D\uDCC5"}),h.jsx("span",{className:"font-semibold",children:t.date}),h.jsx("span",{className:"text-gray-400",children:""}),h.jsx("span",{children:"\uD83D\uDD50"}),h.jsx("span",{children:t.time})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[(0,h.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Traveler"}),h.jsx("p",{className:"font-semibold text-sm",children:e.travelerName})]}),e.seatNumber&&(0,h.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Seat"}),h.jsx("p",{className:"font-semibold text-sm",children:e.seatNumber})]}),e.terminal&&(0,h.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Terminal"}),h.jsx("p",{className:"font-semibold text-sm",children:e.terminal})]}),e.gate&&(0,h.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Gate"}),h.jsx("p",{className:"font-semibold text-sm",children:e.gate})]}),e.confirmationNumber&&(0,h.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Confirmation"}),h.jsx("p",{className:"font-semibold text-sm",children:e.confirmationNumber})]})]}),e.notes&&h.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 mb-3",children:(0,h.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["\uD83D\uDCDD ",e.notes]})}),e.isGroupFlight&&(0,h.jsxs)("div",{className:"mt-3",children:[h.jsx("p",{className:"text-sm font-semibold mb-2",children:"Passengers on this flight:"}),(0,h.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,h.jsxs)("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm",children:[e.travelerName," ",e.seatNumber&&`(${e.seatNumber})`]}),e.guestUserIds?.map(e=>{let t=p.find(t=>t.id===e);return t?h.jsxs("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[t.name," ",t.seatNumber&&`(${t.seatNumber})`]},e):null}),h.jsx("button",{onClick:()=>d(e),className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"+ Add Passenger"})]})]})]}),(0,h.jsxs)("div",{className:"flex gap-2 ml-4",children:[h.jsx("button",{onClick:()=>j(e),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),h.jsx("button",{onClick:()=>T(e.id),className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id)})}),u&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",children:[h.jsx("h3",{className:"text-lg font-bold mb-4",children:"Add Passenger to Flight"}),(0,h.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Select a traveler to add to ",u.flightNumber||"this flight"]}),h.jsx("div",{className:"space-y-2 mb-4",children:p.filter(e=>!u.guestUserIds?.includes(e.id)&&e.name!==u.travelerName).map(e=>(0,h.jsxs)("button",{onClick:()=>{A(u,e)},className:"w-full p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors text-left",children:[h.jsx("p",{className:"font-semibold",children:e.name}),e.email&&h.jsx("p",{className:"text-sm text-gray-500",children:e.email})]},e.id))}),h.jsx("button",{onClick:()=>d(null),className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})})]})}function ix({tripData:e}){let[t,r]=(0,m.useState)(e),[n,i]=(0,m.useState)("overview"),[a,s]=(0,m.useState)([]),[o,l]=(0,m.useState)([]),[c,u]=(0,m.useState)([]),[d,p]=(0,m.useState)(!1),[f,g]=(0,m.useState)(null),[x,b]=(0,m.useState)({destinationCity:t?.destinationCity||"",groupSize:t?.groupSize||2,startDate:t?.startDate||"",endDate:t?.endDate||""}),[y,v]=(0,m.useState)(!1),[N,k]=(0,m.useState)(!1),[S,E]=(0,m.useState)(""),[w,T]=(0,m.useState)([]),[j,A]=(0,m.useState)(null),[C,O]=(0,m.useState)(null),[D,I]=(0,m.useState)(!1),[_,L]=(0,m.useState)("all"),[R,M]=(0,m.useState)([]),[P,F]=(0,m.useState)({title:"",description:"",location:"",date:"",time:"",cost:"",duration:"",category:"activity"}),[$,U]=(0,m.useState)([]),[B,K]=(0,m.useState)(!1),[q,G]=(0,m.useState)(""),[V,z]=(0,m.useState)(null),[W,Y]=(0,m.useState)(""),[H,J]=(0,m.useState)("pot"),[Q,X]=(0,m.useState)({arrivalAirport:"",arrivalTime:"",departureAirport:"",departureTime:"",airline:"",flightNumber:"",direction:"arrival",forWho:"myself"});return h.jsx("div",{className:"app-container",children:(0,h.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[h.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:(0,h.jsxs)("div",{className:"flex justify-between items-start",children:[(0,h.jsxs)("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?.name||"Your Trip"}),(0,h.jsxs)("p",{className:"text-gray-600 mt-2",children:[t?.destinationCity,"  ",t?.startDate," to ",t?.endDate]})]}),(0,h.jsxs)("div",{className:"text-right",children:[h.jsx("p",{className:"text-sm text-gray-500",children:"Share Code"}),h.jsx("p",{className:"text-xl font-mono font-bold",children:t?.shareCode})]})]})}),h.jsx("div",{className:"bg-white rounded-xl shadow-md mb-6",children:h.jsx("div",{className:"flex overflow-x-auto",children:[{id:"overview",label:"Overview",icon:"\uD83C\uDFE0"},{id:"flights",label:"Flights",icon:""},{id:"itinerary",label:"Itinerary",icon:"\uD83D\uDCC5"},{id:"places",label:"Places",icon:"\uD83D\uDCCD"},{id:"budget",label:"Budget",icon:"\uD83D\uDCB0"}].map(e=>(0,h.jsxs)("button",{"data-tab":e.id,onClick:()=>i(e.id),className:`flex-1 px-6 py-4 text-center transition-colors ${n===e.id?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"}`,children:[h.jsx("span",{className:"text-2xl mb-1",children:e.icon}),h.jsx("div",{className:"text-sm font-medium",children:e.label})]},e.id))})}),(0,h.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:["overview"===n&&h.jsx(ip,{tripData:t,onTripUpdate:e=>r(e),flightCount:a.length,eventCount:o.length,placeCount:c.length,totalBudget:$.reduce((e,t)=>e+(t.amount||0),0)}),"flights"===n&&h.jsx(ig,{tripId:t?.id,tripData:t,onFlightsUpdate:e=>s(e)}),"itinerary"===n&&(0,h.jsxs)("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Itinerary"}),0===o.length?h.jsx("p",{className:"text-gray-500",children:"No items in your itinerary yet."}):h.jsx("div",{className:"space-y-4",children:o.map(e=>(0,h.jsxs)("div",{className:"border rounded-lg p-4",children:[h.jsx("h3",{className:"font-semibold",children:e.title}),h.jsx("p",{className:"text-sm text-gray-600",children:e.location}),(0,h.jsxs)("p",{className:"text-sm text-gray-600",children:[e.date," ",e.time&&`at ${e.time}`]}),e.description&&h.jsx("p",{className:"mt-2 text-gray-700",children:e.description})]},e.id))}),h.jsx("button",{onClick:()=>I(!0),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add to Itinerary"})]}),"places"===n&&(0,h.jsxs)("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Places to Visit"}),0===c.length?h.jsx("p",{className:"text-gray-500",children:"No places saved yet."}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(e=>(0,h.jsxs)("div",{className:"border rounded-lg p-4",children:[h.jsx("h3",{className:"font-semibold",children:e.name}),e.address&&h.jsx("p",{className:"text-sm text-gray-600",children:e.address}),e.category&&h.jsx("span",{className:"inline-block mt-2 px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e.category}),e.rating&&(0,h.jsxs)("p",{className:"mt-2 text-sm",children:["Rating: ","".repeat(Math.round(e.rating))]})]},e.id))})]}),"budget"===n&&(0,h.jsxs)("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Budget Tracker"}),0===$.length?h.jsx("p",{className:"text-gray-500",children:"Loading budget categories..."}):(0,h.jsxs)("div",{className:"space-y-4",children:[$.map(e=>h.jsx("div",{className:"border rounded-lg p-4",children:(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"font-semibold",children:e.name}),(0,h.jsxs)("p",{className:"text-sm text-gray-600",children:["Total: $",e.totalAmount||0]}),(0,h.jsxs)("p",{className:"text-sm text-gray-600",children:["Per person: $",e.perPersonAmount||0]})]}),h.jsx("button",{onClick:()=>{z(e.id),Y(e.totalAmount?.toString()||"0")},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Edit"})]})},e.id)),(0,h.jsxs)("div",{className:"border-t pt-4",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center font-bold",children:[h.jsx("span",{children:"Total Budget"}),(0,h.jsxs)("span",{children:["$",$.reduce((e,t)=>e+(t.totalAmount||0),0)]})]}),(0,h.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600 mt-1",children:[h.jsx("span",{children:"Per Person"}),(0,h.jsxs)("span",{children:["$",$.reduce((e,t)=>e+(t.perPersonAmount||0),0)]})]})]})]}),h.jsx("button",{onClick:()=>K(!0),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add Category"})]})]})]})})}var ib=r(7389);function iy(){let[e,t]=(0,m.useState)(!1);(0,ib.useRouter)();let r=[{icon:"",label:"Flights",action:()=>{let e=document.querySelector('[data-tab="flights"]');e&&e.click(),t(!1)},color:"bg-blue-500"},{icon:"\uD83D\uDCCD",label:"Places",action:()=>{let e=document.querySelector('[data-tab="places"]');e&&e.click(),t(!1)},color:"bg-green-500"},{icon:"\uD83D\uDCC5",label:"Itinerary",action:()=>{let e=document.querySelector('[data-tab="itinerary"]');e&&e.click(),t(!1)},color:"bg-purple-500"},{icon:"\uD83D\uDCB0",label:"Budget",action:()=>{let e=document.querySelector('[data-tab="budget"]');e&&e.click(),t(!1)},color:"bg-yellow-500"},{icon:"\uD83C\uDFE0",label:"Overview",action:()=>{let e=document.querySelector('[data-tab="overview"]');e&&e.click(),window.scrollTo({top:0,behavior:"smooth"}),t(!1)},color:"bg-gray-500"}];return(0,h.jsxs)(h.Fragment,{children:[e&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 z-40 md:hidden",onClick:()=>t(!1)}),h.jsx("div",{className:`fixed bottom-20 right-4 z-50 flex flex-col gap-3 transition-all duration-300 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"}`,children:r.map((t,r)=>(0,h.jsxs)("button",{onClick:t.action,className:`${t.color} text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:scale-110 transition-transform`,style:{transitionDelay:e?`${50*r}ms`:"0ms"},children:[h.jsx("span",{className:"text-xl",children:t.icon}),h.jsx("span",{className:"absolute right-full mr-3 bg-gray-800 text-white text-sm px-3 py-1 rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity hidden md:block",children:t.label})]},r))}),e&&h.jsx("div",{className:"fixed bottom-20 right-20 z-40 flex flex-col gap-3 md:hidden",children:r.map((e,t)=>h.jsx("div",{className:"bg-gray-800 text-white text-sm px-3 py-1 rounded-lg whitespace-nowrap h-14 flex items-center",style:{transitionDelay:`${50*t}ms`,animation:"slideInRight 0.3s ease-out forwards"},children:e.label},t))}),h.jsx("button",{onClick:()=>t(!e),className:`fixed bottom-6 right-4 z-50 bg-primary text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:scale-110 transition-all duration-300 ${e?"rotate-45":""}`,children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}function iv(){let{user:e}=(0,f.Z)(e=>[e.user]),[t,r]=(0,m.useState)("hero"),[n,i]=(0,m.useState)(null);return(0,h.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[h.jsx(x,{}),"hero"===t?h.jsx(ic,{onTripCreated:e=>{i(e),r("dashboard")}}):h.jsx(ix,{tripData:n}),"dashboard"===t&&h.jsx(iy,{})]})}},5480:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(8570).createProxy)(String.raw`/Users/chief/Documents/Repos/CHI/pathfind/src/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[880,940],()=>r(2314));module.exports=n})();