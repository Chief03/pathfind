(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4060:function(e,t,r){Promise.resolve().then(r.bind(r,65912))},65912:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(57437),s=r(2265),l=r(93306),i=r(96203);function n(){var e,t,r;let{user:n}=(0,l.Z)(e=>[e.user]),[o,d]=(0,s.useState)(!1),c=async()=>{try{await (0,i.w)()}catch(e){console.error("Error signing out:",e)}};return(0,a.jsx)("nav",{className:"bg-white shadow-md sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("a",{href:"/",className:"text-2xl font-bold text-[#FF5A5F]",children:"pathfind"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),(0,a.jsx)("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>d(!o),className:"flex items-center space-x-2 p-2 hover:bg-gray-100 rounded-lg",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:n?null===(t=n.username)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.toUpperCase():"?"})]}),o&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-4 py-2 text-sm text-gray-700 border-b",children:n.username||(null===(r=n.signInDetails)||void 0===r?void 0:r.loginId)}),(0,a.jsx)("button",{onClick:()=>console.log("My Trips"),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"My Trips"}),(0,a.jsx)("button",{onClick:()=>console.log("Profile"),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"Profile"}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsx)("button",{onClick:c,className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-red-600",children:"Sign Out"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>console.log("Sign In"),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"Sign In"}),(0,a.jsx)("button",{onClick:()=>console.log("Sign Up"),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"Create Account"})]})})]})]})]})})})}var o=r(25297),d=r(96652);function c(e){let{value:t,onChange:r,min:l,placeholder:i="Select date",required:n=!1,className:o=""}=e,[d,c]=(0,s.useState)(!1),[u,x]=(0,s.useState)(new Date),m=new Date(u.getFullYear(),u.getMonth()+1,0).getDate(),g=new Date(u.getFullYear(),u.getMonth(),1).getDay(),h=l?new Date(l+"T00:00:00"):null,p=t?new Date(t+"T00:00:00"):null,b=e=>!!h&&new Date(u.getFullYear(),u.getMonth(),e)<h,v=e=>{if(b(e))return;let t=u.getFullYear(),a=String(u.getMonth()+1).padStart(2,"0"),s=String(e).padStart(2,"0");r("".concat(t,"-").concat(a,"-").concat(s)),c(!1)},y=e=>{let t=new Date;return e===t.getDate()&&u.getMonth()===t.getMonth()&&u.getFullYear()===t.getFullYear()},f=e=>!!p&&e===p.getDate()&&u.getMonth()===p.getMonth()&&u.getFullYear()===p.getFullYear();return(0,s.useEffect)(()=>{let e=e=>{e.target.closest(".date-picker-container")||c(!1)};if(d)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[d]),(0,a.jsxs)("div",{className:"date-picker-container relative",children:[(0,a.jsx)("input",{type:"text",value:t?new Date(t+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",onClick:()=>c(!d),readOnly:!0,placeholder:i,required:n,className:"cursor-pointer ".concat(o)}),d&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 bg-white border border-gray-200 rounded-lg shadow-xl p-4 min-w-[320px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{x(new Date(u.getFullYear(),u.getMonth()-1))},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("h3",{className:"font-semibold text-gray-900",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][u.getMonth()]," ",u.getFullYear()]}),(0,a.jsx)("button",{type:"button",onClick:()=>{x(new Date(u.getFullYear(),u.getMonth()+1))},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-semibold text-gray-600 py-1",children:e},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:g}).map((e,t)=>(0,a.jsx)("div",{className:"p-2"},"empty-".concat(t))),Array.from({length:m}).map((e,t)=>{let r=t+1,s=b(r),l=f(r),i=y(r);return(0,a.jsx)("button",{type:"button",onClick:()=>v(r),disabled:s,className:"\n                    p-2 rounded-lg text-sm font-medium transition-all\n                    ".concat(s?"text-gray-300 bg-gray-50 cursor-not-allowed line-through":"hover:bg-[#FF5A5F] hover:text-white cursor-pointer","\n                    ").concat(l?"bg-[#FF5A5F] text-white":"","\n                    ").concat(!i||l||s?"":"border-2 border-[#FF5A5F] text-[#FF5A5F] font-bold","\n                    ").concat(s||l||i?"":"text-gray-700","\n                  "),children:r},r)})]}),(0,a.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-200 flex items-center justify-center gap-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-[#FF5A5F] rounded"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Today"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-[#FF5A5F] rounded"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Selected"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-50 rounded line-through"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Unavailable"})]})]})]})]})}function u(e){let{onTripCreated:t}=e,{user:r}=(0,l.Z)(e=>[e.user]),[i,n]=(0,s.useState)(!1),[u,x]=(0,s.useState)({tripName:"",destination:"",startDate:"",endDate:"",groupSize:2,departure:""}),m=new Date().toISOString().split("T")[0],g=async e=>{if(e.preventDefault(),!r){n(!0);return}try{let e=(0,d.d)(),{data:r}=await e.models.Trip.create({name:u.tripName||"Trip to ".concat(u.destination),destinationCity:u.destination,departureCity:u.departure,startDate:u.startDate,endDate:u.endDate,groupSize:u.groupSize,shareCode:h()});r&&t(r)}catch(e){console.error("Error creating trip:",e)}},h=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let r=0;r<8;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"relative bg-cover bg-center min-h-[600px] flex items-center justify-center",style:{backgroundImage:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[(0,a.jsx)("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Plan Your Perfect Trip Together"}),(0,a.jsx)("p",{className:"text-xl text-white/90 mb-12",children:"Collaborate with friends, discover events, and create unforgettable memories"}),(0,a.jsxs)("form",{onSubmit:g,className:"bg-white rounded-2xl shadow-2xl p-8 max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Name"}),(0,a.jsx)("input",{type:"text",value:u.tripName,onChange:e=>x({...u,tripName:e.target.value}),placeholder:"e.g. The Boys Out, Girls Weekend, Family Vacation",className:"input-field"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Where to?"}),(0,a.jsx)("input",{type:"text",value:u.destination,onChange:e=>x({...u,destination:e.target.value}),placeholder:"Enter destination city",className:"input-field",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From where?"}),(0,a.jsx)("input",{type:"text",value:u.departure,onChange:e=>x({...u,departure:e.target.value}),placeholder:"Enter departure city",className:"input-field"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,a.jsx)(c,{value:u.startDate,onChange:e=>{x({...u,startDate:e,endDate:u.endDate&&u.endDate<e?"":u.endDate})},min:m,placeholder:"Select start date",className:"input-field",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,a.jsx)(c,{value:u.endDate,onChange:e=>x({...u,endDate:e}),min:u.startDate||m,placeholder:"Select end date",className:"input-field",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Size"}),(0,a.jsx)("select",{value:u.groupSize,onChange:e=>x({...u,groupSize:parseInt(e.target.value)}),className:"input-field",children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,a.jsxs)("option",{value:e,children:[e," ",1===e?"person":"people"]},e))})]})]}),(0,a.jsx)("button",{type:"submit",className:"btn-primary w-full text-lg py-4",children:"Start Planning Your Trip"})]})]})}),i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:[(0,a.jsx)("button",{onClick:()=>n(!1),className:"float-right text-gray-500 hover:text-gray-700",children:"✕"}),(0,a.jsx)(o._,{children:e=>{let{signOut:t,user:s}=e;return s&&!r&&setTimeout(()=>{n(!1),g(new Event("submit"))},100),s?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"mb-4",children:["Welcome ",s.username,"!"]}),(0,a.jsx)("button",{onClick:()=>{n(!1),g(new Event("submit"))},className:"btn-primary w-full",children:"Continue"})]}):(0,a.jsx)(a.Fragment,{})}})]})})]})}var x=r(71926),m=r(3078);function g(e){let{compact:t=!1,maxItems:r=20,filter:l}=e,{activities:i,clearActivities:n,exportActivities:o}=(0,m.x)(),[d,c]=(0,s.useState)([]),[u,x]=(0,s.useState)(!t),[g,h]=(0,s.useState)("all"),[p,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=i;(null==l?void 0:l.category)&&(e=e.filter(e=>e.category===l.category)),(null==l?void 0:l.type)&&(e=e.filter(e=>e.type===l.type)),"all"!==g&&(e=e.filter(e=>e.category===g)),c(e.slice(0,r))},[i,l,g,r]);let v=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/1e3),r=Math.floor(t/60),a=Math.floor(r/60),s=Math.floor(a/24);return t<60?"just now":r<60?"".concat(r,"m ago"):a<24?"".concat(a,"h ago"):s<7?"".concat(s,"d ago"):e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})};return t?(0,a.jsxs)("div",{className:"relative transform hover:scale-[1.02] transition-transform",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl transform translate-y-1"}),(0,a.jsx)("div",{className:"relative bg-gradient-to-b from-gray-600 via-gray-700 to-gray-800 rounded-2xl p-1 shadow-2xl",children:(0,a.jsx)("div",{className:"bg-gradient-to-b from-gray-800 to-black rounded-2xl p-0.5",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-xl p-5 shadow-inner min-h-[160px]",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent rounded-xl pointer-events-none"}),(0,a.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-yellow-400 rounded-full shadow-lg shadow-yellow-400/50 animate-pulse"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-bold text-sm",children:"Activity Feed"}),(0,a.jsxs)("p",{className:"text-white/60 text-xs",children:[i.length," events"]})]})]}),(0,a.jsx)("button",{onClick:()=>x(!u),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-white transition-transform ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!u&&(0,a.jsxs)("div",{className:"space-y-1",children:[d.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{className:"text-white/80 truncate flex-1",children:e.action}),(0,a.jsx)("span",{className:"text-white/40",children:v(e.timestamp)})]},e.id)),i.length>3&&(0,a.jsxs)("p",{className:"text-white/40 text-xs text-center pt-1",children:["+",i.length-3," more"]})]}),u&&(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[(0,a.jsx)("button",{onClick:()=>h("all"),className:"px-2 py-1 rounded-full text-xs font-semibold transition-colors ".concat("all"===g?"bg-white text-indigo-900":"bg-white/10 text-white hover:bg-white/20"),children:"All"}),["trip","flight","event","place"].map(e=>(0,a.jsx)("button",{onClick:()=>h(e),className:"px-2 py-1 rounded-full text-xs font-semibold transition-colors ".concat(g===e?"bg-white text-indigo-900":"bg-white/10 text-white hover:bg-white/20"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,a.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:0===d.length?(0,a.jsx)("p",{className:"text-white/40 text-xs text-center py-4",children:"No activities yet"}):d.map(e=>(0,a.jsx)("div",{className:"bg-black/30 rounded-lg p-2",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-lg mt-0.5",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-white text-xs font-semibold",children:e.action}),e.details&&(0,a.jsx)("p",{className:"text-white/60 text-xs mt-0.5 truncate",children:"string"==typeof e.details?e.details:JSON.stringify(e.details)}),(0,a.jsx)("p",{className:"text-white/40 text-xs mt-1",children:v(e.timestamp)})]})]})},e.id))}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)("button",{onClick:()=>b(!0),className:"flex-1 px-3 py-1.5 bg-white/10 text-white rounded-lg text-xs font-semibold hover:bg-white/20 transition-colors",children:"Export"}),(0,a.jsx)("button",{onClick:n,className:"flex-1 px-3 py-1.5 bg-red-500/20 text-red-300 rounded-lg text-xs font-semibold hover:bg-red-500/30 transition-colors",children:"Clear"})]})]})]})]})})})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCCA"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Activity Feed"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["Tracking ",i.length," events"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Export Log"}),(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Clear All"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat("all"===g?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"All"}),["trip","flight","event","place","budget"].map(e=>(0,a.jsxs)("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat(g===e?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[e.charAt(0).toUpperCase()+e.slice(1),"s"]},e))]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===d.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{className:"text-4xl mb-4 block",children:"\uD83D\uDCDD"}),(0,a.jsx)("p",{children:"No activities to display"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Activities will appear here as you use the app"})]}):d.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold ".concat(e.color),children:e.action}),e.details&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"string"==typeof e.details?e.details:JSON.stringify(e.details,null,2)})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:v(e.timestamp)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded-full",children:e.category}),(0,a.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded-full",children:e.type}),e.userName&&(0,a.jsxs)("span",{children:["by ",e.userName]})]})]})]},e.id))}),p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Export Activity Log"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Export all ",i.length," activities as a JSON file for backup or analysis."]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{let e=new Blob([o()],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="activity-log-".concat(new Date().toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(t),b(!1)},className:"flex-1 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors",children:"Download JSON"}),(0,a.jsx)("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})]})}function h(e){var t;let{tripData:r,onTripUpdate:l,flightCount:i=0,eventCount:n=0,placeCount:o=0,totalBudget:c=0}=e,{addActivity:u}=(0,m.x)(),[x,h]=(0,s.useState)(null),[p,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)({name:(null==r?void 0:r.name)||"",destinationCity:(null==r?void 0:r.destinationCity)||"",departureCity:(null==r?void 0:r.departureCity)||"",startDate:(null==r?void 0:r.startDate)||"",endDate:(null==r?void 0:r.endDate)||"",groupSize:(null==r?void 0:r.groupSize)||2,description:(null==r?void 0:r.description)||""});(0,s.useEffect)(()=>{y({name:(null==r?void 0:r.name)||"",destinationCity:(null==r?void 0:r.destinationCity)||"",departureCity:(null==r?void 0:r.departureCity)||"",startDate:(null==r?void 0:r.startDate)||"",endDate:(null==r?void 0:r.endDate)||"",groupSize:(null==r?void 0:r.groupSize)||2,description:(null==r?void 0:r.description)||""})},[r]);let f=e=>e?new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}):"",j=async e=>{try{let t=(0,d.d)(),a={id:r.id};"dates"===e?(a.startDate=v.startDate,a.endDate=v.endDate):"destination"===e?(a.destinationCity=v.destinationCity,a.departureCity=v.departureCity):a[e]=v[e];let{data:s}=await t.models.Trip.update(a);u({type:"update",category:"trip",action:"Updated trip ".concat(e),details:a}),l&&l(s),h(null)}catch(e){console.error("Error updating trip:",e)}},N=()=>{y({name:(null==r?void 0:r.name)||"",destinationCity:(null==r?void 0:r.destinationCity)||"",departureCity:(null==r?void 0:r.departureCity)||"",startDate:(null==r?void 0:r.startDate)||"",endDate:(null==r?void 0:r.endDate)||"",groupSize:(null==r?void 0:r.groupSize)||2,description:(null==r?void 0:r.description)||""}),h(null)},k=[{id:"destination",label:"Set destination",completed:!!(null==r?void 0:r.destinationCity),points:10},{id:"dates",label:"Choose travel dates",completed:!!(null==r?void 0:r.startDate)&&!!(null==r?void 0:r.endDate),points:10},{id:"group",label:"Set group size",completed:((null==r?void 0:r.groupSize)||0)>0,points:5},{id:"flight",label:"Add at least one flight (".concat(i," added)"),completed:i>0,points:20},{id:"accommodation",label:"Book accommodation",completed:!1,points:20},{id:"activities",label:"Plan 3+ activities (".concat(n," planned)"),completed:n>=3,points:15},{id:"places",label:"Save 5+ places to visit (".concat(o," saved)"),completed:o>=5,points:10},{id:"budget",label:"Set trip budget ($".concat(c," allocated)"),completed:c>0,points:10}],w=Math.round(k.filter(e=>e.completed).reduce((e,t)=>e+t.points,0)/k.reduce((e,t)=>e+t.points,0)*100);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-600",children:"Trip Planning Progress"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"text-sm font-bold text-purple-600",children:[w,"% Complete"]}),(0,a.jsx)("button",{onClick:()=>b(!p),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-500 transition-transform ".concat(p?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-purple-600 h-2.5 rounded-full transition-all duration-500",style:{width:"".concat(w,"%")}})})]}),p&&(0,a.jsxs)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 uppercase font-semibold mb-3",children:"Complete these steps to plan your perfect trip:"}),k.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.completed?(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}):(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"}),(0,a.jsx)("span",{className:"text-sm ".concat(e.completed?"text-gray-700 line-through":"text-gray-600"),children:e.label})]}),(0,a.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(e.completed?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:["+",e.points,"%"]})]},e.id))]}),w<100&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-purple-800",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Next step:"})," ",(null===(t=k.find(e=>!e.completed))||void 0===t?void 0:t.label)||"Complete all tasks"]})}),100===w&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-green-800 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83C\uDF89"}),(0,a.jsx)("span",{className:"font-semibold",children:"Awesome! Your trip is fully planned!"})]})})]})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-red-50 rounded-2xl p-6 border border-purple-100",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:["name"===x?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"text",value:v.name,onChange:e=>y({...v,name:e.target.value}),className:"text-2xl font-bold bg-white px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Trip name"}),(0,a.jsx)("button",{onClick:()=>j("name"),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Save"}),(0,a.jsx)("button",{onClick:N,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:(null==r?void 0:r.name)||"Untitled Trip"}),(0,a.jsx)("button",{onClick:()=>h("name"),className:"p-2 hover:bg-white/50 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Created ",new Date((null==r?void 0:r.createdAt)||Date.now()).toLocaleDateString()]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),null==r?void 0:r.shareCode]})]})]}),(0,a.jsxs)("button",{onClick:()=>navigator.clipboard.writeText((null==r?void 0:r.shareCode)||""),className:"px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Share Trip"]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{className:"relative transform hover:scale-[1.02] transition-transform",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl transform translate-y-1"}),(0,a.jsx)("div",{className:"relative bg-gradient-to-b from-gray-600 via-gray-700 to-gray-800 rounded-2xl p-1 shadow-2xl",children:(0,a.jsx)("div",{className:"bg-gradient-to-b from-gray-800 to-black rounded-2xl p-0.5",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-900 via-pink-900 to-red-900 rounded-xl p-4 shadow-inner",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent rounded-xl pointer-events-none"}),(0,a.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-400 rounded-full shadow-lg shadow-green-400/50 animate-pulse"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Destination"}),!x&&(0,a.jsx)("button",{onClick:()=>h("destination"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),"destination"===x?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",value:v.destinationCity,onChange:e=>y({...v,destinationCity:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Destination city"}),(0,a.jsx)("input",{type:"text",value:v.departureCity,onChange:e=>y({...v,departureCity:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Departure city"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>j("destination"),className:"flex-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Save"}),(0,a.jsx)("button",{onClick:N,className:"flex-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:(null==r?void 0:r.destinationCity)||"Not set"})]}),(null==r?void 0:r.departureCity)&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})}),"from ",null==r?void 0:r.departureCity]})]})]})]})})})]}),(0,a.jsxs)("div",{className:"relative transform hover:scale-[1.02] transition-transform",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl transform translate-y-1"}),(0,a.jsx)("div",{className:"relative bg-gradient-to-b from-gray-600 via-gray-700 to-gray-800 rounded-2xl p-1 shadow-2xl",children:(0,a.jsx)("div",{className:"bg-gradient-to-b from-gray-800 to-black rounded-2xl p-0.5",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-900 to-cyan-900 rounded-xl p-4 shadow-inner",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent rounded-xl pointer-events-none"}),(0,a.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-blue-400 rounded-full shadow-lg shadow-blue-400/50 animate-pulse"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Travel Dates"}),!x&&(0,a.jsx)("button",{onClick:()=>h("dates"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),"dates"===x?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"date",value:v.startDate,onChange:e=>y({...v,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"date",value:v.endDate,onChange:e=>y({...v,endDate:e.target.value}),min:v.startDate,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>j("dates"),className:"flex-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Save"}),(0,a.jsx)("button",{onClick:N,className:"flex-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:f(null==r?void 0:r.startDate).split(",")[0]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:f(null==r?void 0:r.startDate).split(",").slice(1).join(",")})]}),(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400 mx-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:f(null==r?void 0:r.endDate).split(",")[0]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:f(null==r?void 0:r.endDate).split(",").slice(1).join(",")})]})]}),(0,a.jsxs)("p",{className:"text-xs font-semibold text-purple-600 bg-purple-50 rounded-full px-3 py-1 inline-block mt-2",children:[((e,t)=>{if(!e||!t)return 0;let r=new Date(e);return Math.ceil(Math.abs(new Date(t).getTime()-r.getTime())/864e5)})(null==r?void 0:r.startDate,null==r?void 0:r.endDate)," nights"]})]})]})]})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-lg transition-all hover:scale-[1.02]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Travelers"}),!x&&(0,a.jsx)("button",{onClick:()=>h("groupSize"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),"groupSize"===x?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>y({...v,groupSize:Math.max(1,v.groupSize-1)}),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,a.jsx)("input",{type:"number",value:v.groupSize,onChange:e=>y({...v,groupSize:parseInt(e.target.value)||1}),min:"1",max:"20",className:"flex-1 px-3 py-2 border border-purple-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-center text-lg font-semibold"}),(0,a.jsx)("button",{onClick:()=>y({...v,groupSize:Math.min(20,v.groupSize+1)}),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>j("groupSize"),className:"flex-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Save"}),(0,a.jsx)("button",{onClick:N,className:"flex-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex -space-x-2",children:[[...Array(Math.min((null==r?void 0:r.groupSize)||1,4))].map((e,t)=>(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-red-400 to-purple-500 border-2 border-white flex items-center justify-center text-white font-semibold text-xs",children:0===t?"You":t+1},t)),((null==r?void 0:r.groupSize)||1)>4&&(0,a.jsxs)("div",{className:"w-8 h-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-gray-600 font-semibold text-xs",children:["+",((null==r?void 0:r.groupSize)||1)-4]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(null==r?void 0:r.groupSize)||1}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:(null==r?void 0:r.groupSize)===1?"Solo":"People"})]})]}),(0,a.jsx)("button",{onClick:()=>h("groupSize"),className:"mt-2 text-xs text-purple-600 hover:text-purple-700 font-medium",children:"Change →"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-lg transition-all hover:scale-[1.02]",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Share Code"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-mono font-bold text-purple-600 mb-1",children:null==r?void 0:r.shareCode}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:"Share with friends"})]}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText((null==r?void 0:r.shareCode)||"")},className:"p-2 bg-purple-50 text-purple-600 rounded-lg hover:bg-purple-100 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]}),(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)(g,{compact:!0,maxItems:10})})]})}let p={AA:"American Airlines",DL:"Delta Air Lines",UA:"United Airlines",WN:"Southwest Airlines",B6:"JetBlue Airways",AS:"Alaska Airlines",NK:"Spirit Airlines",F9:"Frontier Airlines",G4:"Allegiant Air",SY:"Sun Country Airlines",BA:"British Airways",AF:"Air France",LH:"Lufthansa",EK:"Emirates",QR:"Qatar Airways",SQ:"Singapore Airlines",AC:"Air Canada",QF:"Qantas",NH:"All Nippon Airways",JL:"Japan Airlines",KE:"Korean Air",CX:"Cathay Pacific",TK:"Turkish Airlines",EY:"Etihad Airways",LX:"SWISS",KL:"KLM",IB:"Iberia",AZ:"Alitalia",OS:"Austrian Airlines",SK:"SAS",AY:"Finnair",TP:"TAP Air Portugal",LO:"LOT Polish Airlines"};async function b(e,t){let r=function(e){let t=e.replace(/\s+/g,"").toUpperCase().match(/^([A-Z]{2,3})(\d{1,4})$/);if(t){let[e,r,a]=t;return{airline:p[r]||r,number:"".concat(r).concat(a)}}return null}(e);if(!r)return null;let a={AA3421:{departureAirport:"Dallas/Fort Worth (DFW)",arrivalAirport:"Denver (DEN)",departureTime:"10:30",arrivalTime:"11:45",aircraft:"Boeing 737-800"},UA1234:{departureAirport:"San Francisco (SFO)",arrivalAirport:"Denver (DEN)",departureTime:"08:00",arrivalTime:"11:30",aircraft:"Airbus A320"},DL456:{departureAirport:"Atlanta (ATL)",arrivalAirport:"Los Angeles (LAX)",departureTime:"13:15",arrivalTime:"14:45",aircraft:"Boeing 757-200"},WN789:{departureAirport:"Chicago Midway (MDW)",arrivalAirport:"Las Vegas (LAS)",departureTime:"15:20",arrivalTime:"17:05",aircraft:"Boeing 737-700"}}[r.number];return a?{airline:r.airline,flightNumber:r.number,...a}:{airline:r.airline,flightNumber:r.number}}function v(e){let{tripId:t,tripData:r,onFlightsUpdate:l}=e,{addActivity:i}=(0,m.x)(),[n,o]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[v,y]=(0,s.useState)([]),[f,j]=(0,s.useState)(!0),[N,k]=(0,s.useState)(!1),[w,C]=(0,s.useState)({airline:"",flightNumber:"",arrivalDateTime:"",departureAirport:"",arrivalAirport:"",travelerName:"",confirmationNumber:"",seatNumber:"",terminal:"",gate:"",notes:"",isGroupFlight:!1}),[D,S]=(0,s.useState)({name:"",email:"",seatNumber:""});(0,s.useEffect)(()=>{let e=[{id:"1",name:"You",isOwner:!0},{id:"2",name:"Friend 1"},{id:"3",name:"Friend 2"}];(null==r?void 0:r.groupSize)?y([...e,...Array.from({length:Math.max(0,r.groupSize-3)},(e,t)=>({id:"".concat(4+t),name:"Traveler ".concat(4+t)}))].slice(0,r.groupSize)):y(e)},[r]),(0,s.useEffect)(()=>{A()},[t]);let A=async()=>{try{j(!0),o([])}catch(e){console.error("Error loading flights:",e)}finally{j(!1)}},L=async()=>{if(w.flightNumber){k(!0);try{let e=await b(w.flightNumber,w.arrivalDateTime||new Date().toISOString().split("T")[0]);e&&C(t=>{var r,a,s,l;return{...t,airline:e.airline||t.airline,departureAirport:(null===(a=e.departureAirport)||void 0===a?void 0:null===(r=a.match(/\(([A-Z]{3})\)/))||void 0===r?void 0:r[1])||t.departureAirport,arrivalAirport:(null===(l=e.arrivalAirport)||void 0===l?void 0:null===(s=l.match(/\(([A-Z]{3})\)/))||void 0===s?void 0:s[1])||t.arrivalAirport}})}catch(e){console.error("Error looking up flight:",e)}finally{k(!1)}}},F=async()=>{try{var e;if((0,d.d)(),!w.airline||!w.arrivalDateTime||!w.departureAirport||!w.arrivalAirport||!w.travelerName){alert("Please fill in all required fields");return}let r={...w,tripId:t,userId:"current-user-id",departureAirport:w.departureAirport.toUpperCase(),arrivalAirport:w.arrivalAirport.toUpperCase(),flightNumber:null===(e=w.flightNumber)||void 0===e?void 0:e.toUpperCase(),status:"scheduled"};if(x){let e={...r,id:x};o(t=>t.map(t=>t.id===x?e:t)),i({type:"update",category:"flight",action:"Updated flight ".concat(r.flightNumber||r.airline),details:{route:"".concat(r.departureAirport," → ").concat(r.arrivalAirport)}})}else{let e={...r,id:"flight_".concat(Date.now()),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};o(t=>[...t,e]),i({type:"create",category:"flight",action:"Added flight ".concat(r.flightNumber||r.airline),details:{route:"".concat(r.departureAirport," → ").concat(r.arrivalAirport)}})}C({airline:"",flightNumber:"",arrivalDateTime:"",departureAirport:"",arrivalAirport:"",travelerName:"",confirmationNumber:"",seatNumber:"",terminal:"",gate:"",notes:"",isGroupFlight:!1}),u(!1),g(null),l&&l(n)}catch(e){console.error("Error saving flight:",e)}},T=async e=>{try{let t=n.find(t=>t.id===e);o(t=>t.filter(t=>t.id!==e)),t&&i({type:"delete",category:"flight",action:"Deleted flight ".concat(t.flightNumber||t.airline),details:{route:"".concat(t.departureAirport," → ").concat(t.arrivalAirport)}}),l&&l(n.filter(t=>t.id!==e))}catch(e){console.error("Error deleting flight:",e)}},M=e=>{C({airline:e.airline,flightNumber:e.flightNumber||"",arrivalDateTime:e.arrivalDateTime,departureAirport:e.departureAirport,arrivalAirport:e.arrivalAirport,travelerName:e.travelerName,confirmationNumber:e.confirmationNumber||"",seatNumber:e.seatNumber||"",terminal:e.terminal||"",gate:e.gate||"",notes:e.notes||"",isGroupFlight:e.isGroupFlight||!1}),g(e.id),u(!0)},z=(e,t)=>{let r={...e,guestUserIds:[...e.guestUserIds||[],t.id]};o(t=>t.map(t=>t.id===e.id?r:t)),p(null)},B=e=>{let t=new Date(e);return{date:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),time:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"✈️ Flight Management"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Track and manage all flights for your trip"})]}),(0,a.jsx)("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:scale-105 transition-transform shadow-lg",children:"+ Add Flight"})]}),c&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-xl border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"✈️"}),x?"Edit Flight":"Add New Flight"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Flight Number (Optional)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"e.g., AA1234",value:w.flightNumber,onChange:e=>C({...w,flightNumber:e.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"}),(0,a.jsx)("button",{onClick:L,disabled:!w.flightNumber||N,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:N?"\uD83D\uDD0D Searching...":"\uD83D\uDD0D Lookup"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Airline *"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g., American Airlines",value:w.airline,onChange:e=>C({...w,airline:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Traveler Name *"}),(0,a.jsxs)("select",{value:w.travelerName,onChange:e=>C({...w,travelerName:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select traveler"}),v.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Departure Airport (IATA) *"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g., JFK",value:w.departureAirport,onChange:e=>C({...w,departureAirport:e.target.value.toUpperCase()}),maxLength:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500 uppercase",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Arrival Airport (IATA) *"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g., LAX",value:w.arrivalAirport,onChange:e=>C({...w,arrivalAirport:e.target.value.toUpperCase()}),maxLength:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500 uppercase",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Arrival Date & Time *"}),(0,a.jsx)("input",{type:"datetime-local",value:w.arrivalDateTime,onChange:e=>C({...w,arrivalDateTime:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Confirmation Number"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g., ABC123",value:w.confirmationNumber,onChange:e=>C({...w,confirmationNumber:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Terminal"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g., Terminal 2",value:w.terminal,onChange:e=>C({...w,terminal:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Gate"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g., B14",value:w.gate,onChange:e=>C({...w,gate:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Seat Number"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g., 12A",value:w.seatNumber,onChange:e=>C({...w,seatNumber:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"groupFlight",checked:w.isGroupFlight,onChange:e=>C({...w,isGroupFlight:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:"groupFlight",className:"text-sm font-medium",children:"Multiple travelers on this flight"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),(0,a.jsx)("textarea",{placeholder:"Additional information...",value:w.notes,onChange:e=>C({...w,notes:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:outline-none focus:border-blue-500"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,a.jsx)("button",{onClick:F,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:scale-105 transition-transform",children:x?"Update Flight":"Save Flight"}),(0,a.jsx)("button",{onClick:()=>{u(!1),g(null),C({airline:"",flightNumber:"",arrivalDateTime:"",departureAirport:"",arrivalAirport:"",travelerName:"",confirmationNumber:"",seatNumber:"",terminal:"",gate:"",notes:"",isGroupFlight:!1})},className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}),f?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading flights..."})]}):0===n.length?(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"✈️"}),(0,a.jsx)("h3",{className:"text-xl font-bold mb-2",children:"No Flights Yet"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Add your first flight to get started"}),(0,a.jsx)("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:scale-105 transition-transform shadow-lg",children:"Add Your First Flight"})]}):(0,a.jsx)("div",{className:"space-y-4",children:n.map(e=>{var t;let r=B(e.arrivalDateTime);return(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:"✈️"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-bold",children:e.flightNumber||"".concat(e.airline," Flight")}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.airline})]}),e.isGroupFlight&&(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-xs font-semibold",children:"Group Flight"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.departureAirport}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Departure"})]}),(0,a.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-blue-400 to-purple-400"}),(0,a.jsx)("span",{className:"mx-2",children:"→"}),(0,a.jsx)("div",{className:"flex-1 h-[2px] bg-gradient-to-r from-purple-400 to-pink-400"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.arrivalAirport}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Arrival"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-sm",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC5"}),(0,a.jsx)("span",{className:"font-semibold",children:r.date}),(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsx)("span",{children:"\uD83D\uDD50"}),(0,a.jsx)("span",{children:r.time})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Traveler"}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:e.travelerName})]}),e.seatNumber&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Seat"}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:e.seatNumber})]}),e.terminal&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Terminal"}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:e.terminal})]}),e.gate&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Gate"}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:e.gate})]}),e.confirmationNumber&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Confirmation"}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:e.confirmationNumber})]})]}),e.notes&&(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 mb-3",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["\uD83D\uDCDD ",e.notes]})}),e.isGroupFlight&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Passengers on this flight:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm",children:[e.travelerName," ",e.seatNumber&&"(".concat(e.seatNumber,")")]}),null===(t=e.guestUserIds)||void 0===t?void 0:t.map(e=>{let t=v.find(t=>t.id===e);return t?(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[t.name," ",t.seatNumber&&"(".concat(t.seatNumber,")")]},e):null}),(0,a.jsx)("button",{onClick:()=>p(e),className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"+ Add Passenger"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>M(e),className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>T(e.id),className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id)})}),h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Add Passenger to Flight"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Select a traveler to add to ",h.flightNumber||"this flight"]}),(0,a.jsx)("div",{className:"space-y-2 mb-4",children:v.filter(e=>{var t;return!(null===(t=h.guestUserIds)||void 0===t?void 0:t.includes(e.id))&&e.name!==h.travelerName}).map(e=>(0,a.jsxs)("button",{onClick:()=>{z(h,e)},className:"w-full p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors text-left",children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),e.email&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]},e.id))}),(0,a.jsx)("button",{onClick:()=>p(null),className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})})]})}function y(e){let{tripData:t}=e,[r,l]=(0,s.useState)(t),[i,n]=(0,s.useState)("overview"),[o,c]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[g,p]=(0,s.useState)([]),[b,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(null),[N,k]=(0,s.useState)({destinationCity:(null==r?void 0:r.destinationCity)||"",groupSize:(null==r?void 0:r.groupSize)||2,startDate:(null==r?void 0:r.startDate)||"",endDate:(null==r?void 0:r.endDate)||""}),[w,C]=(0,s.useState)(!1),[D,S]=(0,s.useState)(!1),[A,L]=(0,s.useState)(""),[F,T]=(0,s.useState)([]),[M,z]=(0,s.useState)(null),[B,E]=(0,s.useState)(null),[I,P]=(0,s.useState)(!1),[U,W]=(0,s.useState)("all"),[O,Y]=(0,s.useState)([]),[q,H]=(0,s.useState)({title:"",description:"",location:"",date:"",time:"",cost:"",duration:"",category:"activity"}),[G,J]=(0,s.useState)([]),[R,_]=(0,s.useState)(!1),[V,K]=(0,s.useState)(""),[Z,Q]=(0,s.useState)(null),[$,X]=(0,s.useState)(""),[ee,et]=(0,s.useState)("pot"),[er,ea]=(0,s.useState)({arrivalAirport:"",arrivalTime:"",departureAirport:"",departureTime:"",airline:"",flightNumber:"",direction:"arrival",forWho:"myself"});(0,s.useEffect)(()=>{(null==r?void 0:r.id)&&el(),k({destinationCity:(null==r?void 0:r.destinationCity)||"",groupSize:(null==r?void 0:r.groupSize)||2,startDate:(null==r?void 0:r.startDate)||"",endDate:(null==r?void 0:r.endDate)||""})},[r]),(0,s.useEffect)(()=>{es()},[]),(0,s.useEffect)(()=>{(null==r?void 0:r.destinationCity)&&Y((r.destinationCity,[{id:"game-night",title:"Game Night at Accommodation",category:"activity",description:"Host a fun game night with drinking games, board games, or card games",price:"free",duration:"2-4 hours",tags:["indoor","group","evening"]},{id:"movie-marathon",title:"Movie Marathon",category:"activity",description:"Cozy movie night with friends, snacks, and your favorite films",price:"free",duration:"3-5 hours",tags:["indoor","group","evening","relaxing"]},{id:"pool-day",title:"Pool/Beach Day",category:"outdoor",description:"Relax by the pool or hit the beach for sun and fun",price:"free",duration:"Half day",tags:["outdoor","daytime","relaxing","summer"]},{id:"cooking-together",title:"Group Cooking Session",category:"activity",description:"Cook a meal together - great for bonding and saving money",price:"free",duration:"2-3 hours",tags:["indoor","group","mealtime"]},{id:"concert-1",title:"Live Music at Red Rocks",category:"concert",description:"Outdoor amphitheater concert experience",location:"Red Rocks Amphitheatre",price:75,duration:"3 hours",requiresTicket:!0,bookingUrl:"https://example.com/tickets",tags:["music","outdoor","evening","ticketed"]},{id:"concert-2",title:"Jazz Night at Blue Note",category:"nightlife",description:"Intimate jazz performance with cocktails",location:"Blue Note Jazz Club",price:45,duration:"2 hours",requiresTicket:!0,tags:["music","indoor","evening","21+"]},{id:"museum-1",title:"Art Museum Visit",category:"cultural",description:"Explore local art and cultural exhibits",location:"City Art Museum",price:25,duration:"2-3 hours",rating:4.5,tags:["cultural","indoor","daytime","educational"]},{id:"tour-1",title:"City Walking Tour",category:"attraction",description:"Guided tour of historic downtown area",location:"Downtown Meeting Point",price:35,duration:"2 hours",rating:4.8,tags:["outdoor","daytime","walking","historical"]},{id:"restaurant-1",title:"Rooftop Bar Sunset",category:"nightlife",description:"Cocktails with panoramic city views",location:"Sky Bar",price:50,duration:"2 hours",rating:4.6,tags:["drinks","views","evening","21+"]},{id:"restaurant-2",title:"Local Food Market",category:"restaurant",description:"Sample local cuisine from various vendors",location:"Central Market",price:20,duration:"1-2 hours",rating:4.7,tags:["food","local","casual","daytime"]},{id:"hike-1",title:"Morning Hike",category:"outdoor",description:"Scenic trail with mountain views",location:"Trailhead Park",price:"free",duration:"3 hours",rating:4.9,tags:["outdoor","exercise","morning","nature"]},{id:"adventure-1",title:"Zip Line Adventure",category:"outdoor",description:"Thrilling zip line course through the forest",location:"Adventure Park",price:89,duration:"3 hours",requiresTicket:!0,rating:4.8,tags:["outdoor","adventure","daytime","adrenaline"]}]))},[null==r?void 0:r.destinationCity]),(0,s.useEffect)(()=>{(null==r?void 0:r.id)&&"budget"===i&&ei()},[null==r?void 0:r.id,i]);let es=async()=>{try{let e=await (0,x.v)();L(e.given_name||e.email||"User")}catch(e){console.error("Error fetching user attributes:",e),L("User")}},el=async()=>{if(null==r?void 0:r.id)try{let e=(0,d.d)(),t=await e.models.Flight.list({filter:{tripId:{eq:r.id}}});c(t.data||[]);let a=await e.models.ItineraryItem.list({filter:{tripId:{eq:r.id}}});m(a.data||[]);let s=await e.models.Place.list({filter:{tripId:{eq:r.id}}});p(s.data||[])}catch(e){console.error("Error loading trip data:",e)}},ei=async()=>{if(null==r?void 0:r.id)try{let e=(0,d.d)(),t=await e.models.Budget.list({filter:{tripId:{eq:r.id}}});t.data&&t.data.length>0?J(t.data):await en()}catch(e){console.error("Error loading budgets:",e)}},en=async()=>{if(null==r?void 0:r.id)try{let e=(0,d.d)(),t=r.groupSize||2,a=await Promise.all([{name:"Accommodation",icon:"\uD83C\uDFE8"},{name:"Food & Drinks",icon:"\uD83C\uDF7D️"},{name:"Transportation",icon:"\uD83D\uDE97"},{name:"Activities",icon:"\uD83C\uDFAF"},{name:"Shopping",icon:"\uD83D\uDECD️"}].map(a=>e.models.Budget.create({tripId:r.id,category:a.name.toLowerCase().replace(/[^a-z0-9]/g,"_"),name:a.name,totalAmount:0,perPersonAmount:0,groupSize:t})));J(a.map(e=>e.data).filter(Boolean))}catch(e){console.error("Error initializing budgets:",e)}};return(0,a.jsx)("div",{className:"app-container",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:(null==r?void 0:r.name)||"Your Trip"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:[null==r?void 0:r.destinationCity," • ",null==r?void 0:r.startDate," to ",null==r?void 0:r.endDate]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Share Code"}),(0,a.jsx)("p",{className:"text-xl font-mono font-bold",children:null==r?void 0:r.shareCode})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-md mb-6",children:(0,a.jsx)("div",{className:"flex overflow-x-auto",children:[{id:"overview",label:"Overview",icon:"\uD83C\uDFE0"},{id:"flights",label:"Flights",icon:"✈️"},{id:"itinerary",label:"Itinerary",icon:"\uD83D\uDCC5"},{id:"places",label:"Places",icon:"\uD83D\uDCCD"},{id:"budget",label:"Budget",icon:"\uD83D\uDCB0"}].map(e=>(0,a.jsxs)("button",{"data-tab":e.id,onClick:()=>n(e.id),className:"flex-1 px-6 py-4 text-center transition-colors ".concat(i===e.id?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"),children:[(0,a.jsx)("span",{className:"text-2xl mb-1",children:e.icon}),(0,a.jsx)("div",{className:"text-sm font-medium",children:e.label})]},e.id))})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:["overview"===i&&(0,a.jsx)(h,{tripData:r,onTripUpdate:e=>l(e),flightCount:o.length,eventCount:u.length,placeCount:g.length,totalBudget:G.reduce((e,t)=>e+(t.amount||0),0)}),"flights"===i&&(0,a.jsx)(v,{tripId:null==r?void 0:r.id,tripData:r,onFlightsUpdate:e=>c(e)}),"itinerary"===i&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Itinerary"}),0===u.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No items in your itinerary yet."}):(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.location}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.date," ",e.time&&"at ".concat(e.time)]}),e.description&&(0,a.jsx)("p",{className:"mt-2 text-gray-700",children:e.description})]},e.id))}),(0,a.jsx)("button",{onClick:()=>P(!0),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add to Itinerary"})]}),"places"===i&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Places to Visit"}),0===g.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No places saved yet."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),e.address&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.address}),e.category&&(0,a.jsx)("span",{className:"inline-block mt-2 px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e.category}),e.rating&&(0,a.jsxs)("p",{className:"mt-2 text-sm",children:["Rating: ","⭐".repeat(Math.round(e.rating))]})]},e.id))})]}),"budget"===i&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Budget Tracker"}),0===G.length?(0,a.jsx)("p",{className:"text-gray-500",children:"Loading budget categories..."}):(0,a.jsxs)("div",{className:"space-y-4",children:[G.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Total: $",e.totalAmount||0]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Per person: $",e.perPersonAmount||0]})]}),(0,a.jsx)("button",{onClick:()=>{var t;Q(e.id),X((null===(t=e.totalAmount)||void 0===t?void 0:t.toString())||"0")},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Edit"})]})},e.id)),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center font-bold",children:[(0,a.jsx)("span",{children:"Total Budget"}),(0,a.jsxs)("span",{children:["$",G.reduce((e,t)=>e+(t.totalAmount||0),0)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600 mt-1",children:[(0,a.jsx)("span",{children:"Per Person"}),(0,a.jsxs)("span",{children:["$",G.reduce((e,t)=>e+(t.perPersonAmount||0),0)]})]})]})]}),(0,a.jsx)("button",{onClick:()=>_(!0),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add Category"})]})]})]})})}var f=r(99376);function j(){let[e,t]=(0,s.useState)(!1);(0,f.useRouter)();let r=[{icon:"✈️",label:"Flights",action:()=>{let e=document.querySelector('[data-tab="flights"]');e&&e.click(),t(!1)},color:"bg-blue-500"},{icon:"\uD83D\uDCCD",label:"Places",action:()=>{let e=document.querySelector('[data-tab="places"]');e&&e.click(),t(!1)},color:"bg-green-500"},{icon:"\uD83D\uDCC5",label:"Itinerary",action:()=>{let e=document.querySelector('[data-tab="itinerary"]');e&&e.click(),t(!1)},color:"bg-purple-500"},{icon:"\uD83D\uDCB0",label:"Budget",action:()=>{let e=document.querySelector('[data-tab="budget"]');e&&e.click(),t(!1)},color:"bg-yellow-500"},{icon:"\uD83C\uDFE0",label:"Overview",action:()=>{let e=document.querySelector('[data-tab="overview"]');e&&e.click(),window.scrollTo({top:0,behavior:"smooth"}),t(!1)},color:"bg-gray-500"}];return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 z-40 md:hidden",onClick:()=>t(!1)}),(0,a.jsx)("div",{className:"fixed bottom-20 right-4 z-50 flex flex-col gap-3 transition-all duration-300 ".concat(e?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"),children:r.map((t,r)=>(0,a.jsxs)("button",{onClick:t.action,className:"".concat(t.color," text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:scale-110 transition-transform"),style:{transitionDelay:e?"".concat(50*r,"ms"):"0ms"},children:[(0,a.jsx)("span",{className:"text-xl",children:t.icon}),(0,a.jsx)("span",{className:"absolute right-full mr-3 bg-gray-800 text-white text-sm px-3 py-1 rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity hidden md:block",children:t.label})]},r))}),e&&(0,a.jsx)("div",{className:"fixed bottom-20 right-20 z-40 flex flex-col gap-3 md:hidden",children:r.map((e,t)=>(0,a.jsx)("div",{className:"bg-gray-800 text-white text-sm px-3 py-1 rounded-lg whitespace-nowrap h-14 flex items-center",style:{transitionDelay:"".concat(50*t,"ms"),animation:"slideInRight 0.3s ease-out forwards"},children:e.label},t))}),(0,a.jsx)("button",{onClick:()=>t(!e),className:"fixed bottom-6 right-4 z-50 bg-primary text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:scale-110 transition-all duration-300 ".concat(e?"rotate-45":""),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}function N(){let{user:e}=(0,l.Z)(e=>[e.user]),[t,r]=(0,s.useState)("hero"),[i,o]=(0,s.useState)(null);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[(0,a.jsx)(n,{}),"hero"===t?(0,a.jsx)(u,{onTripCreated:e=>{o(e),r("dashboard")}}):(0,a.jsx)(y,{tripData:i}),"dashboard"===t&&(0,a.jsx)(j,{})]})}},3078:function(e,t,r){"use strict";r.d(t,{ActivityTrackerProvider:function(){return n},x:function(){return i}});var a=r(57437),s=r(2265);let l=(0,s.createContext)(void 0),i=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useActivityTracker must be used within ActivityTrackerProvider");return e},n=e=>{let{children:t}=e,[r,i]=(0,s.useState)(()=>{{let e=localStorage.getItem("app_activities");if(e)try{return JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}))}catch(e){console.error("Failed to parse stored activities:",e)}}return[]});(0,s.useEffect)(()=>{localStorage.setItem("app_activities",JSON.stringify(r))},[r]);let n=(0,s.useCallback)(e=>{var t,r,a;let s={...e,id:"activity_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date,icon:e.icon||(t=e.category,e.type,({trip:"✈️",flight:"\uD83D\uDEEB",event:"\uD83D\uDCC5",place:"\uD83D\uDCCD",budget:"\uD83D\uDCB0",user:"\uD83D\uDC64",system:"⚙️"})[t]||"\uD83D\uDCDD"),color:e.color||(e.category,({create:"text-green-600",update:"text-blue-600",delete:"text-red-600",view:"text-gray-600",navigate:"text-purple-600",error:"text-red-700",success:"text-green-700"})[e.type]||"text-gray-700")};i(e=>[s,...e].slice(0,500))},[]),o=(0,s.useCallback)(()=>{i([]),localStorage.removeItem("app_activities")},[]),d=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return r.slice(0,e)},[r]),c=(0,s.useCallback)(e=>r.filter(t=>t.category===e),[r]),u=(0,s.useCallback)(e=>r.filter(t=>t.type===e),[r]),x=(0,s.useCallback)(()=>JSON.stringify(r.map(e=>({...e,timestamp:e.timestamp.toISOString()})),null,2),[r]);return(0,a.jsx)(l.Provider,{value:{activities:r,addActivity:n,clearActivities:o,getRecentActivities:d,getActivitiesByCategory:c,getActivitiesByType:u,exportActivities:x},children:t})}}},function(e){e.O(0,[297,561,971,117,744],function(){return e(e.s=4060)}),_N_E=e.O()}]);